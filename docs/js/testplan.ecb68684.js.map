{"version":3,"sources":["webpack:///./src/views/testplan/testplan.vue","webpack:///./src/views/testplan/testplan.vue?3258","webpack:///./src/api/testplan.js","webpack:///./src/utils/request.js"],"names":["type","to","columns","data-source","data","scroll","bodyCell","record","column","dataIndex","key","deletes","id","runplan","title","width","ellipsis","created","testplan","then","res","console","log","setup","code","message","success","content","duration","location","reload","result","method","headers","Authorization","localStorage","getItem","url","__exports__","render","testplan_api","request","testplan_get","params","testplan_del","axios","create","baseURL","timeout","defaults","post","errorHandler","error","response","token","status","notification","description","window","href","isLogin","router","useRouter","push","Promise","reject","interceptors","use","config"],"mappings":"oJAGsC,W,+BAOQ,O,EAIpC,eAAW,SAAR,QAAI,G,iBACK,O,EAGZ,eAAa,SAAV,UAAM,G,iBACG,M,uLAjBpB,eAEW,GAFDA,KAAK,WAAS,C,yBACtB,iBAAuD,CAAvD,eAAuD,GAA1CC,GAAG,mBAAiB,C,yBAAC,iBAAO,C,sBAE3C,eAkBU,GAlBAC,QAAS,EAAAA,QAAUC,cAAa,EAAAC,KAAOC,OAAQ,S,CAC5CC,SAAQ,iBACjB,gBADqBC,EACrB,EADqBA,OAAQC,EAC7B,EAD6BA,OAC7B,MADmC,CACH,SAAhBA,EAAOC,W,iBAAvB,eAAyD,uB,sBAE/B,cAAVD,EAAOE,K,iBAAvB,eAYW,gBAXT,eAAsC,KAAlC,QAAK,mBAAE,EAAAC,QAAQJ,KAAS,SAAM,K,EAClC,eAIc,GAHXN,GAAE,mCAA2CM,EAAOK,M,0BAErD,iBAAW,CAAX,M,oBAGF,eAEc,GAFAX,GAAE,mCAA2CM,EAAOK,M,0BAChE,iBAAa,CAAb,M,oBAED,eAAwC,KAApC,QAAK,mBAAE,EAAAC,QAAQN,EAAOK,MAAM,OAAI,M,uHAUvCV,EAAU,CACd,CACEY,MAAO,YACPC,MAAO,MACPN,UAAW,OACXC,IAAK,OACLM,UAAU,GAEZ,CACEF,MAAO,WACPC,MAAO,MACPN,UAAW,WACXC,IAAK,WACLM,UAAU,GAEZ,CACEF,MAAO,UACPL,UAAW,gBACXC,IAAK,gBACLK,MAAO,MACPC,UAAU,GAEZ,CACEF,MAAO,aACPL,UAAW,cACXC,IAAK,cACLK,MAAO,MACPC,UAAU,GAEZ,CACEF,MAAO,SACPJ,IAAK,YACLK,MAAO,MAII,iBAAgB,CAC7BX,KAD6B,WAE3B,MAAO,CACLA,KAAM,GACNF,YAGJe,QAP6B,WAOnB,WACR,OAAAC,EAAA,QAAeC,MAAK,SAACC,GACnB,EAAKhB,KAAOgB,EAAIhB,KAChBiB,QAAQC,IAAI,iBAIhBC,MAd6B,WAe3B,IAAMZ,EAAU,SAACJ,GACf,OAAAW,EAAA,MAAaX,EAAOK,IAAIO,MAAK,SAACC,GACZ,KAAZA,EAAII,MACNC,EAAA,KAAQC,QAAQ,CACdC,QAAS,QACTC,SAAU,IAEZC,SAASC,UAETL,EAAA,KAAQC,QAAQ,CACdC,QAAS,QACTC,SAAU,IAIdP,QAAQC,IAAIF,GACZC,QAAQC,IAAIF,EAAIhB,KAAKA,KAAK2B,YAGxBlB,EAAU,SAACN,GACdkB,EAAA,KAAQC,QAAQ,CACXC,QAAS,QACTC,SAAU,IAEhB,IAAM,CACJI,OAAQ,OACRC,QAAS,CAAEC,cAAeC,aAAaC,QAAQ,UAC/CC,IAAK,eACLjC,KAAM,CAAC,GAAMG,KACZY,MAAK,SAACC,GACc,KAAjBA,EAAIhB,KAAKoB,KACXC,EAAA,KAAQC,QAAQ,CACdC,QAAS,QACTC,SAAU,IAIZH,EAAA,KAAQC,QAAQ,CACdC,QAAS,QACTC,SAAU,IAIdP,QAAQC,IAAIF,GACZC,QAAQC,IAAIF,EAAIhB,KAAKA,KAAK2B,YAI9B,MAAO,CACLpB,UACAE,c,qBC9HN,MAAMyB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,kCCPf,sHAEO,SAASC,EAAapC,EAAK4B,GAC9B,OAAOS,OAAQA,QAAQ,CACnBT,OAAQA,EACNK,IAAK,YACLjC,KAAMA,IAIT,SAASsC,EAAatC,GACzB,OAAOqC,OAAQA,QAAQ,CACnBT,OAAQ,MACNK,IAAK,YACLM,OAAQvC,IAoBX,SAASwC,EAAaxC,GACzB,OAAOqC,OAAQA,QAAQ,CACnBT,OAAQ,SACNK,IAAK,YACLjC,KAAM,CAACA,O,6FC7BXqC,EAAUI,IAAMC,OAAO,CAE3BC,QAAS,iCACTC,QAAS,MAEXP,EAAQQ,SAAShB,QAAQiB,KAAK,gBAAkB,iCAEhD,IAAMC,EAAe,SAACC,GACpB,GAAIA,EAAMC,SAAU,CAClB,IAAMjD,EAAOgD,EAAMC,SAASjD,KAEtBkD,EAAQnB,aAAaC,QAAQ,SAWnC,GAV8B,MAA1BgB,EAAMC,SAASE,SACjBC,OAAaJ,MAAM,CACjB3B,QAAS,YACTgC,YAAarD,EAAKqB,UAEpBiC,OAAO7B,SAAS8B,KAAK,WAKO,MAA1BP,EAAMC,SAASE,UAAoBnD,EAAK2B,SAAU3B,EAAK2B,OAAO6B,SAAU,CAC1EJ,OAAaJ,MAAM,CACjB3B,QAAS,eACTgC,YAAa,sCAGXH,GAKFI,OAAO7B,SAASC,SAIlB,IAAM+B,EAASC,iBACfD,EAAOE,KAAK,WAIhB,OAAOC,QAAQC,OAAOb,IAIxBX,EAAQyB,aAAazB,QAAQ0B,KAAI,SAAAC,GAC/B,IAAMd,EAAQnB,aAAaC,QAAQ,SAMnC,OAHIkB,IACFc,EAAOnC,QAAQ,iBAAmBqB,GAE7Bc,IACNjB,GAGHV,EAAQyB,aAAab,SAASc,KAAI,SAACd,GACjC,OAAOA,EAASjD,OACf+C,GASYV","file":"js/testplan.ecb68684.js","sourcesContent":["\r\n<template>\r\n  <a-button type=\"primary\">\r\n    <router-link to=\"create_testplan\">Create </router-link>\r\n  </a-button>\r\n  <a-table :columns=\"columns\" :data-source=\"data\" :scroll=\"{ y: 800 }\">\r\n    <template #bodyCell=\"{ record, column }\">\r\n      <template v-if=\"column.dataIndex === 'name'\"> </template>\r\n\r\n      <template v-if=\"column.key === 'operation'\">\r\n        <a @click=\"deletes(record)\">Delete</a> |\r\n        <router-link\r\n          :to=\"{ path: '/create_testplan', query: { id: record.id } }\"\r\n        >\r\n          <a>Edit</a>\r\n        </router-link>\r\n        |\r\n        <router-link :to=\"{ path: '/report', query: { testplan_id: record.id } }\">\r\n          <a>report</a>\r\n        </router-link>\r\n        |<a @click=\"runplan(record.id )\"> run</a>\r\n      </template>\r\n    </template>\r\n  </a-table>\r\n</template>\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport { testplan_get, testplan_del } from \"@/api/testplan\";\r\nimport axios from \"axios\";\r\n\r\nconst columns = [\r\n  {\r\n    title: \"Full Name\",\r\n    width: \"20%\",\r\n    dataIndex: \"name\",\r\n    key: \"name\",\r\n    ellipsis: true,\r\n  },\r\n  {\r\n    title: \"describe\",\r\n    width: \"20%\",\r\n    dataIndex: \"describe\",\r\n    key: \"describe\",\r\n    ellipsis: true,\r\n  },\r\n  {\r\n    title: \"project\",\r\n    dataIndex: \"project__name\",\r\n    key: \"project__name\",\r\n    width: \"20%\",\r\n    ellipsis: true,\r\n  },\r\n  {\r\n    title: \"createtime\",\r\n    dataIndex: \"create_time\",\r\n    key: \"create_time\",\r\n    width: \"20%\",\r\n    ellipsis: true,\r\n  },\r\n  {\r\n    title: \"Action\",\r\n    key: \"operation\",\r\n    width: 120,\r\n  },\r\n];\r\nimport { message } from \"ant-design-vue\";\r\nexport default defineComponent({\r\n  data() {\r\n    return {\r\n      data: [],\r\n      columns,\r\n    };\r\n  },\r\n  created() {\r\n    testplan_get().then((res) => {\r\n      this.data = res.data;\r\n      console.log(\"=========\");\r\n    });\r\n  },\r\n\r\n  setup() {\r\n    const deletes = (record) => {\r\n      testplan_del(record.id).then((res) => {\r\n        if (res.code == 200) {\r\n          message.success({\r\n            content: \"删除成功！\",\r\n            duration: 5,\r\n          });\r\n          location.reload();\r\n        } else {\r\n          message.success({\r\n            content: \"删除失败！\",\r\n            duration: 5,\r\n          });\r\n        }\r\n\r\n        console.log(res);\r\n        console.log(res.data.data.result);\r\n      });\r\n    };\r\n    const runplan = (record) => {\r\n       message.success({\r\n            content: \"开始运行！\",\r\n            duration: 5,\r\n          });\r\n      axios({\r\n        method: \"post\",\r\n        headers: { Authorization: localStorage.getItem(\"token\") },\r\n        url: \"runtestplan/\",\r\n        data: {'id': record},\r\n      }).then((res) => {\r\n        if (res.data.code == 200) {\r\n          message.success({\r\n            content: \"运行成功！\",\r\n            duration: 5,\r\n          });\r\n          //  location.reload();\r\n        } else {\r\n          message.success({\r\n            content: \"运行失败！\",\r\n            duration: 5,\r\n          });\r\n        }\r\n\r\n        console.log(res);\r\n        console.log(res.data.data.result);\r\n      });\r\n    };\r\n\r\n    return {\r\n      deletes,\r\n      runplan,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n","import { render } from \"./testplan.vue?vue&type=template&id=6ffaed48\"\nimport script from \"./testplan.vue?vue&type=script&lang=js\"\nexport * from \"./testplan.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\code\\\\GitHub\\\\vue_apitest\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import request from '@/utils/request'\r\n\r\nexport function testplan_api(data,method){\r\n    return request.request({\r\n        method: method,\r\n          url: \"testplan/\",\r\n          data: data,\r\n    })\r\n}\r\n\r\nexport function testplan_get(data){\r\n    return request.request({\r\n        method: \"get\",\r\n          url: \"testplan/\",\r\n          params: data,\r\n    })\r\n}\r\n\r\nexport function testplan_put(data){\r\n    return request.request({\r\n        method: \"put\",\r\n          url: \"testplan/\",\r\n          data: data,\r\n    })\r\n}\r\n\r\nexport function testplan_create(data){\r\n    return request.request({\r\n        method: \"post\",\r\n          url: \"testplan/\",\r\n          data: data,\r\n    })\r\n}\r\n\r\nexport function testplan_del(data){\r\n    return request.request({\r\n        method: \"delete\",\r\n          url: \"testplan/\",\r\n          data: [data],\r\n    })\r\n}","import axios from 'axios'\r\n// import store from '@/store'\r\n// import storage from 'store'\r\nimport notification from 'ant-design-vue/es/notification'\r\n// import { VueAxios } from './axios'\r\n// import { token } from '@/store/mutation-types'\r\nimport { useRouter } from 'vue-router';\r\n\r\n// 创建 axios 实例\r\nconst request = axios.create({\r\n  // API 请求的默认前缀\r\n  baseURL: 'https://124.71.4.214:8000/api/',\r\n  timeout: 10000 // 请求超时时间\r\n})\r\nrequest.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8';//配置请求头信息。\r\n// 异常拦截处理器\r\nconst errorHandler = (error) => {\r\n  if (error.response) {\r\n    const data = error.response.data\r\n    // 从 localstorage 获取 token\r\n    const token = localStorage.getItem(\"token\")\r\n    if (error.response.status === 403) {\r\n      notification.error({\r\n        message: 'Forbidden',\r\n        description: data.message\r\n      })\r\n      window.location.href=\"#/login\";\r\n      // const router = useRouter();\r\n      // router.push(\"/login\")\r\n\r\n    }\r\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\r\n      notification.error({\r\n        message: 'Unauthorized',\r\n        description: 'Authorization verification failed'\r\n\r\n      })\r\n      if (token) {\r\n        // store.dispatch('Logout').then(() => {\r\n        //   setTimeout(() => {\r\n        //     window.location.reload()\r\n        //   }, 1500)\r\n        window.location.reload()\r\n        // })\r\n      }\r\n      // window.location.href=\"/login\";\r\n      const router = useRouter();\r\n      router.push(\"/login\")\r\n    }\r\n\r\n  }\r\n  return Promise.reject(error)\r\n}\r\n\r\n// request interceptor\r\nrequest.interceptors.request.use(config => {\r\n  const token = localStorage.getItem(\"token\")\r\n  // 如果 token 存在\r\n  // 让每个请求携带自定义 token 请根据实际情况自行修改\r\n  if (token) {\r\n    config.headers['Authorization'] = token\r\n  }\r\n  return config\r\n}, errorHandler)\r\n\r\n// response interceptor\r\nrequest.interceptors.response.use((response) => {\r\n  return response.data\r\n}, errorHandler)\r\n\r\n// const installer = {\r\n//   vm: {},\r\n//   install (Vue) {\r\n//     Vue.use(VueAxios, request)\r\n//   }\r\n// }\r\n\r\nexport default request\r\n\r\n// export {\r\n//   // installer as VueAxios,\r\n//   request as axios\r\n// }\r\n"],"sourceRoot":""}