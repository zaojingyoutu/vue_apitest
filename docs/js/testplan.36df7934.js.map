{"version":3,"sources":["webpack:///./src/views/testplan/testplan.vue","webpack:///./src/api/runTestplan.js","webpack:///./src/views/testplan/testplan.vue?3258","webpack:///./src/api/testplan.js","webpack:///./src/utils/request.js"],"names":["type","to","columns","data-source","data","scroll","bodyCell","record","column","dataIndex","key","deletes","id","runplan","runTestplan_post","request","method","url","title","width","ellipsis","created","testplan","then","res","console","log","setup","code","message","success","content","duration","location","reload","result","__exports__","render","testplan_api","testplan_get","params","testplan_del","allURL","process","VUE_APP_FLAG","VUE_APP_BASEURL","axios","create","baseURL","timeout","defaults","headers","post","errorHandler","error","response","token","localStorage","getItem","status","notification","description","window","href","isLogin","router","useRouter","push","Promise","reject","interceptors","use","config"],"mappings":"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","file":"js/testplan.36df7934.js","sourcesContent":["\n<template>\n  <a-button type=\"primary\">\n    <router-link to=\"create_testplan\">Create </router-link>\n  </a-button>\n  <a-table :columns=\"columns\" :data-source=\"data\" :scroll=\"{ y: 800 }\">\n    <template #bodyCell=\"{ record, column }\">\n      <template v-if=\"column.dataIndex === 'name'\"> </template>\n\n      <template v-if=\"column.key === 'operation'\">\n        <a @click=\"deletes(record)\">Delete</a> |\n        <router-link\n          :to=\"{ path: '/create_testplan', query: { id: record.id } }\"\n        >\n          <a>Edit</a>\n        </router-link>\n        |\n        <router-link :to=\"{ path: '/report', query: { testplan_id: record.id } }\">\n          <a>report</a>\n        </router-link>\n        |<a @click=\"runplan(record.id )\"> run</a>\n      </template>\n    </template>\n  </a-table>\n</template>\n<script>\nimport { defineComponent } from \"vue\";\nimport { testplan_get, testplan_del } from \"@/api/testplan\";\nimport {runTestplan_post } from '@/api/runTestplan'\nconst columns = [\n  {\n    title: \"Full Name\",\n    width: \"20%\",\n    dataIndex: \"name\",\n    key: \"name\",\n    ellipsis: true,\n  },\n  {\n    title: \"describe\",\n    width: \"20%\",\n    dataIndex: \"describe\",\n    key: \"describe\",\n    ellipsis: true,\n  },\n  {\n    title: \"project\",\n    dataIndex: \"project__name\",\n    key: \"project__name\",\n    width: \"20%\",\n    ellipsis: true,\n  },\n  {\n    title: \"createtime\",\n    dataIndex: \"create_time\",\n    key: \"create_time\",\n    width: \"20%\",\n    ellipsis: true,\n  },\n  {\n    title: \"Action\",\n    key: \"operation\",\n    width: 120,\n  },\n];\nimport { message } from \"ant-design-vue\";\nexport default defineComponent({\n  data() {\n    return {\n      data: [],\n      columns,\n    };\n  },\n  created() {\n    testplan_get().then((res) => {\n      this.data = res.data;\n      console.log(\"=========\");\n    });\n  },\n\n  setup() {\n    const deletes = (record) => {\n      testplan_del(record.id).then((res) => {\n        if (res.code == 200) {\n          message.success({\n            content: \"删除成功！\",\n            duration: 5,\n          });\n          location.reload();\n        } else {\n          message.success({\n            content: \"删除失败！\",\n            duration: 5,\n          });\n        }\n\n        console.log(res);\n        console.log(res.data.data.result);\n      });\n    };\n    const runplan = (record) => {\n       message.success({\n            content: \"开始运行！\",\n            duration: 5,\n          });\n       runTestplan_post({'id': record}).then((res) => {\n        if (res.code == 200) {\n          message.success({\n            content: \"运行成功！\",\n            duration: 5,\n          });\n          //  location.reload();\n        } else {\n          message.success({\n            content: \"运行失败！\",\n            duration: 5,\n          });\n        }\n\n        console.log(res);\n        console.log(res.data.result);\n      });\n    };\n\n    return {\n      deletes,\n      runplan,\n    };\n  },\n});\n</script>\n\n","import request from '@/utils/request'\n\nexport function runTestplan_api(data,method){\n    return request.request({\n        method: method,\n          url: \"testplan/\",\n          data: data,\n    })\n}\n\nexport function runTestplan_post(data){\n    return request.request({\n        method: \"post\",\n          url: \"runtestplan/\",\n          data: data,\n    })\n}\n","import { render } from \"./testplan.vue?vue&type=template&id=0ae22588\"\nimport script from \"./testplan.vue?vue&type=script&lang=js\"\nexport * from \"./testplan.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/project/vue_apitest/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import request from '@/utils/request'\n\nexport function testplan_api(data,method){\n    return request.request({\n        method: method,\n          url: \"testplan/\",\n          data: data,\n    })\n}\n\nexport function testplan_get(data){\n    return request.request({\n        method: \"get\",\n          url: \"testplan/\",\n          params: data,\n    })\n}\n\nexport function testplan_put(data){\n    return request.request({\n        method: \"put\",\n          url: \"testplan/\",\n          data: data,\n    })\n}\n\nexport function testplan_create(data){\n    return request.request({\n        method: \"post\",\n          url: \"testplan/\",\n          data: data,\n    })\n}\n\nexport function testplan_del(data){\n    return request.request({\n        method: \"delete\",\n          url: \"testplan/\",\n          data: [data],\n    })\n}","import axios from 'axios'\n// import store from '@/store'\n// import storage from 'store'\nimport notification from 'ant-design-vue/es/notification'\n// import { VueAxios } from './axios'\n// import { token } from '@/store/mutation-types'\nimport { useRouter } from 'vue-router';\n\nlet allURL;\nif (process.env.VUE_APP_FLAG == \"dev\") {\n  allURL = process.env.VUE_APP_BASEURL;\n} else{\n  allURL = \"https://www.zaojingyoutu.top:8000/api/\";\n}\n\n\n// 创建 axios 实例\nconst request = axios.create({\n  // API 请求的默认前缀\n  baseURL: allURL,\n  timeout: 300000 // 请求超时时间\n})\nrequest.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8';//配置请求头信息。\n// 异常拦截处理器\nconst errorHandler = (error) => {\n  if (error.response) {\n    const data = error.response.data\n    // 从 localstorage 获取 token\n    const token = localStorage.getItem(\"token\")\n    if (error.response.status === 403) {\n      notification.error({\n        message: 'Forbidden',\n        description: data.message\n      })\n      window.location.href=\"#/login\";\n      // const router = useRouter();\n      // router.push(\"/login\")\n\n    }\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\n      notification.error({\n        message: 'Unauthorized',\n        description: 'Authorization verification failed'\n\n      })\n      if (token) {\n        // store.dispatch('Logout').then(() => {\n        //   setTimeout(() => {\n        //     window.location.reload()\n        //   }, 1500)\n        window.location.reload()\n        // })\n      }\n      // window.location.href=\"/login\";\n      const router = useRouter();\n      router.push(\"/login\")\n    }\n\n  }\n  return Promise.reject(error)\n}\n\n// request interceptor\nrequest.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\")\n  // 如果 token 存在\n  // 让每个请求携带自定义 token 请根据实际情况自行修改\n  if (token) {\n    config.headers['Authorization'] = token\n  }\n  return config\n}, errorHandler)\n\n// response interceptor\nrequest.interceptors.response.use((response) => {\n  if(typeof response.data != 'string'){\n    response.data['status'] = response.status\n}\n  return response.data\n}, errorHandler)\n\n// const installer = {\n//   vm: {},\n//   install (Vue) {\n//     Vue.use(VueAxios, request)\n//   }\n// }\n\nexport default request\n\n// export {\n//   // installer as VueAxios,\n//   request as axios\n// }\n"],"sourceRoot":""}