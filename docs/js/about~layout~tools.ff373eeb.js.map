{"version":3,"sources":["webpack:///./src/components/VueCodemirror.vue","webpack:///./node_modules/codemirror-editor-vue3/dist/codemirror-editor-vue3.es.js","webpack:///./src/components/VueCodemirror.vue?c85d","webpack:///./node_modules/codemirror/lib/codemirror.js","webpack:///./node_modules/diff-match-patch/index.js","webpack:///./node_modules/codemirror/addon/mode/simple.js","webpack:///./src/utils/request.js","webpack:///./node_modules/codemirror/addon/merge/merge.js","webpack:///./node_modules/codemirror/mode/python/python.js","webpack:///./node_modules/core-js/modules/es.json.stringify.js","webpack:///./node_modules/codemirror/mode/javascript/javascript.js"],"names":["value","code","options","cmOptions","border","placeholder","text-align","onChange","style","__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","_export_sfc","sfc","props","target","__vccOpts","val","CodeMirror$3","window","CodeMirror","_sfc_main$3","name","type","String","default","Date","content","cminstance","emits","ready","instance","emit","textarea","_cminstance","initialize","fromTextArea","unwatch","_a","setValue","deep","_hoisted_1$2","_sfc_render$2","_ctx","_cache","$props","$setup","$data","$options","ref","Default","CodeMirror$2","diff_match_patch","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","_sfc_main$2","mergeView","MergeView","_hoisted_1$1","_sfc_render$1","logErrorType","Merge","getLinkMarks","linkRegexp","result","indexObj","exec","node","document","createElement","attrs","JSON","parse","keyAndValues","entries","_key","_value","setAttribute","className","innerHTML","push","start","index","end","length","getLogMark","match","logRegexp","text","replace","textArr","split","contentArr","offset","i","textItem","contentItem","cloneNode","innerText","logErrorType2","startRegex","regex","token","sol","defineSimpleMode","error","info","warning","CodeMirror$1","_sfc_main$1","renderTextMark","marks","getAllMarks","forEach","mark","clear","getValue","linkMarks","concat","_i","markText","posFromIndex","replacedWith","on","immediate","_hoisted_1","_sfc_render","FcLog","componentsEvts","change","cm","input","cmEvts","getCmEvts","args","DEFAULT_OPTIONS","mode","theme","lineNumbers","smartIndent","indentUnit","scrollToEnd","Promise","resolve","then","nowScrollInfo","getScrollInfo","scrollTo","left","height","useEvents","internalInstance","realCm","merge","editor","getBindEvents","evts","keys","vnode","v","startsWith","e","toLowerCase","slice","listenerEvents","currentVal","keepCursorInEnd","tmpEvents","bindEvts","filter","event","useViewControl","presetRef","containerWidth","containerHeight","refresh","resize","width","cmHeight","setSize","destroy","element","getWrapperElement","remove","reload","_b","_c","history","getDoc","getHistory","setHistory","isStyleChaotic","gutterEl","querySelector","gutterElLeft","reviseStyle","timer","setInterval","clearInterval","clearTimer","setTimeout","clearTimeout","_sfc_main","globalOptions","Boolean","Number","marker","Function","unseenLines","Array","__props","expose","assign","varArgs","TypeError","to","index2","arguments","nextSource","nextKey","presetModeName","instanceName","parent","realCminstance","_a2","unseenLineMarkers","line","_b2","lineInfo","setGutterMarker","gutterMarkers","onCodeChange","newVal","CM_VALUE","handlePresetModeName","setOption","class","bordered","ref_key","$event","$attrs","onReady","styleInject","css","insertAt","head","getElementsByTagName","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","msg","components","Codemirror","setup","foldGutter","styleActiveLine","completeSingle","lineWrapping","__exports__","render","global","factory","module","exports","this","userAgent","navigator","platform","gecko","test","ie_upto10","ie_11up","edge","ie","ie_version","documentMode","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","maxTouchPoints","android","mobile","mac","chromeOS","windows","presto_version","flipCtrlCmd","captureRightClick","classTest","cls","RegExp","range","rmClass","current","after","removeChildren","count","childNodes","removeChild","removeChildrenAndAdd","elt","tag","eltP","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","joinClasses","as","createRange","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","select","bind","f","apply","copyObj","overwrite","countColumn","string","tabSize","startIndex","startValue","search","n","nextTab","indexOf","selectionStart","selectionEnd","_e","Delayed","id","time","handler","onTimeout","array","self","set","ms","scrollerGap","Pass","toString","sel_dontScroll","scroll","sel_mouse","origin","sel_move","findColumn","goal","pos","col","skipped","Math","min","spaceStrs","spaceStr","lst","arr","map","out","insertSorted","score","priority","splice","nothing","createObj","base","inst","create","nonASCIISingleCaseWordChar","isWordCharBasic","ch","toUpperCase","isWordChar","helper","source","isEmpty","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","str","dir","charAt","findFirst","pred","from","midF","mid","ceil","floor","iterateBidiSections","order","found","part","max","level","bidiOther","getBidiPartAt","sticky","cur","bidiOrdering","lowTypes","arabicTypes","charType","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","direction","outerType","len","types","i$1","prev","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","j","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","m","i$7","at","isRTL","j$2","nstart","unshift","reverse","getOrder","noHandlers","emitter","addEventListener","attachEvent","_handlers","getHandlers","off","removeEventListener","detachEvent","signal","handlers","signalDOMEvent","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetHeight","offsetWidth","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","right","splitLinesAuto","l","nl","rt","hasSelection","getSelection","te","ownerDocument","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","hasBadZoomedRects","normal","fromRange","abs","modes","mimeModes","defineMode","dependencies","defineMIME","mime","spec","resolveMode","getMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","state","nstate","innerMode","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","getLine","doc","first","size","Error","chunk","lines","children","sz","chunkSize","getBetween","iter","getLines","updateLineHeight","diff","lineNo","no","lineAtHeight","h","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","clipPos","last","clipToLen","linelen","clipPosArray","eol","peek","undefined","next","eat","ok","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","o","overlay","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","display","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","stream","callBlankLine","readToken","blankLine","copy","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","indented","retreatFrontier","sawReadOnlySpans","sawCollapsedSpans","seeReadOnlySpans","seeCollapsedSpans","MarkedSpan","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","op","inThisOp","WeakSet","markedSpans","has","add","attachLine","markedSpansBefore","old","startCh","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","stretchSpansOverChange","full","oldFirst","oldLast","sameLine","span$1","found$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","removeReadOnlyRanges","markers","readOnly","parts","mk","find","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","findMaxLine","d","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","updateLine","estHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","allowFrontierUpdate","externalMeasured","insertLineContent","maps","caches","lastChild","defaultSpecialCharPlaceholder","title","startStyle","endStyle","attributes","displayText","special","specialChars","mustWrap","createDocumentFragment","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","hidden","buildViewArray","nextPos","view","operationGroup","pushOperation","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","orphanDelayedCallbacks","signalLater","list","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","updateLineBackground","background","wrap","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","wrap$1","gutterWrap","lineNumber","gutterLeft","k","gutterSpecs","gutterWidth","alignable","isWidget","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","gutters","wrapper","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","data","parseInt","paddingRight","isNaN","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","ensureLineHeights","rect","wrapping","curWidth","heights","rects","getClientRects","bottom","top","mapFromLineView","updateExternalMeasurement","lineMeasure","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","measureText","nullRect","nodeAndOffsetInLineMap","mStart","mEnd","coverStart","coverEnd","getUsefulRect","place","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","get","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","targetTop","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","closestDist","endX","dist","textHeight","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","clientY","e$1","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","customCursor","$customCursor","sel","ranges","primIndex","empty","drawSelectionCursor","showCursorWhenSelecting","drawSelectionRange","cursor","cursorHeight","charPos","defaultCharWidth","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","fromPos","toPos","openStart","openEnd","openLeft","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","blinker","cursorDiv","visibility","cursorBlinkRate","hasFocus","onBlur","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","draggingText","selForContextMenu","reset","receivedFocus","shift","updateHeightsInViewport","prevBottom","lineDiv","viewTop","oldHeight","mustScroll","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","maybeScrollWindow","doScroll","innerHeight","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","gutterSpace","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","markArrays","endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","scrollbarsClipped","marginBottom","borderRightWidth","selectionSnapshot","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","nodeName","removeAllRanges","addRange","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","toUpdate","selSnapshot","patchDisplay","selectionDiv","reportedViewFrom","reportedViewTo","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumInnerWidth","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","pixelsPerUnit","deltaMode","deltaX","deltaY","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","linesFor","firstLine","lastText","lastSpans","nlines","insert","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","newSel","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","returned","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","replaceRange","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","addLineWidget","aboveVisible","this$1","oldH","nextMarkerId","TextMarker","markTextShared","addToHistory","curLine","clearOnEnter","clearHistory","withOp","visual","dHeight","SharedTextMarker","isParent","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","constructor","join","lineSeparator","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","histData","gutterID","clearGutter","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","link","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","t","readTextFromFile","file","allowDropFileTypes","reader","onerror","onload","readAsText","text$1","getData","selected","onDragStart","setData","effectAllowed","setDragImage","img","src","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","registerGlobalHandlers","resizeTimer","onResize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","224","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","fromCharCode","keyMap","normalizeKeyName","alt","ctrl","cmd","mod","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","keyCode","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","moveVisually","bidi","mv","getWrappedLineExtent","searchInVisualLine","getRes","res","nextCh","basic","pcDefault","emacsy","macDefault","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","leftPos","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","extraKeys","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","handleKeyBinding","motion","handleCharBinding","lastStoppedKey","onKeyDown","getField","handled","showCrossHair","up","onKeyUp","onKeyPress","charCode","lastClick","lastDoubleClick","DOUBLECLICK_DELAY","PastClick","clickRepeat","now","compare","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","onContextMenu","configureMouse","option","unit","addNew","moveOnDrag","contained","behavior","dragDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","preventScroll","e2","rangeForUnit","findWordAt","ourRange","ourIndex","startSel","lastPos","extendTo","startCol","posCol","oldRange","ranges$1","bidiSimplify","editorSize","counter","curCount","move","buttons","anchorLine","boundary","headIndex","usePart","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","Init","defaults","optionHandlers","defineOptions","deflt","notOnInit","defineOption","newBreaks","getInputField","spellcheck","autocorrect","autocapitalize","detach","attach","wrappingChanged","integer","blur","readOnlyChanged","screenReaderLabelChanged","dragDropChanged","resetPosition","wasOn","funcs","dragFunctions","toggle","enter","over","leave","drop","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","registerEventHandlers","finishInit","initHooks","textRendering","word","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","pageX","pageY","inp","how","aggressive","indent","curSpace","curSpaceString","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","hiddenTextarea","addEditorMethods","helpers","addKeyMap","removeKeyMap","addOverlay","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelper","getHelpers","help","_global","getStateAfter","defaultTextHeight","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","hitSide","rtlMoveVisually","findPosV","goalColumn","goals","headPos","startChar","check","interpret","swapDoc","phrase","phraseText","phrases","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","origDir","lineDir","findNextLine","moveOnce","boundToLine","astral","sawType","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","isInGutter","scan","badPos","bad","domTextBetween","closing","extraLinebreak","recognizeMarker","close","addText","walk","cmText","markerID","isBlock","textContent","nodeValue","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","previousSibling","dist$1","belongsToInput","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","contentEditable","updateFromDOM","readFromDOMSoon","forceCompositionEnd","label","removeAttribute","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","poll","pollSelection","pollInterval","pollContent","fromIndex","fromNode","toNode","toIndex","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","TextareaInput","prevInput","pollingFast","tabindex","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","addLegacyProps","cmpPos","createField","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","dontDelegate","method","defineExtension","func","defineDocExtension","version","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","Diff","diff_main","text1","text2","opt_checklines","opt_deadline","MAX_VALUE","getTime","deadline","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","diff_compute_","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","diff_lineMode_","diff_bisect_","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","subDiff","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","front","k1start","k1end","k2start","k2end","k1","k1_offset","x1","y1","k2_offset","x2","diff_bisectSplit_","k2","y2","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineArrayLength","maxLines","pointermin","pointermax","pointermid","pointerstart","pointerend","diff_commonOverlap_","text_length","best","dmp","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","best_common","prefixLength","suffixLength","hm1","hm2","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","param","decodeURI","ex","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","accuracy","proximity","score_threshold","best_loc","lastIndexOf","bin_min","bin_mid","matchmask","last_rd","bin_max","rd","charMatch","patch_addContext_","patch","start2","length1","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","start_loc","expected_loc","end_loc","index1","paddingLength","extraLength","patch_size","bigpatch","precontext","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","sign","coords1","coords2","ensureState","states","toRegex","caret","flags","ignoreCase","unicode","asToken","Rule","tokenFunction","config","pending","pend","local","tok","endToken","localState","endScan","curState","rule","matches","stack","enterLocalMode","dedent","pers","persistent","persistentStates","lState","forceEnd","indentFunction","meta","textAfter","dontIndentStates","rules","dedentIfLineStart","simpleMode","states_","hasIndentation","orig","allURL","process","VUE_APP_FLAG","VUE_APP_BASEURL","request","axios","baseURL","timeout","headers","post","errorHandler","response","localStorage","getItem","status","notification","message","description","location","href","isLogin","router","useRouter","reject","interceptors","use","svgNS","DiffView","del","connect","ensureDiff","dv","diffOutOfDate","getDiff","ignoreWhitespace","chunks","getChunks","pane","diffViews","allowEditingOriginals","trackAlignable","TrackAlignable","lockButton","classLocation","chunkClassLocation","asString","dealigned","needsScrollSync","showDifferences","registerEvents","otherDv","registerUpdate","setScrollLock","registerScroll","setShowDifferences","updating","debounceChange","marked","updatingFast","svg","copyButtons","clearMarks","updateMarks","alignChunks","makeConnections","syncScroll","setDealign","fast","_cm","toOrig","lockScroll","scrollSetBy","scrollSetAt","sInfo","targetPos","botDist","mix","halfScreen","midY","around","chunkBoundariesAround","getOffsets","offOther","ratio","otherInfo","botDistOther","action","removeClass","locs","vp","markChanges","lineNr","main","markChunk","bfrom","bto","chunkStart","tp","cleanFrom","startOfLineClean","moveOver","cleanTo","endOfLineClean","posMax","posMin","posEq","vpEdit","vpOrig","outerTop","sTopEdit","sTopOrig","editFrom","editTo","origFrom","origTo","drawConnectorsForChunk","getMatchingOrigLine","editLine","editStart","origStart","alignableFor","isOrig","tracker","trackI","mergeAlignable","origAlignable","setIndex","rI","origI","chunkI","nextR","nextO","rLine","oLine","record","findAlignedLines","linesToAlign","aligners","alignLines","ln","cmOffset","maxOffset","padAbove","mergeSpacer","flip","topLpx","topRpx","tmp","botLpx","botRpx","curveTop","curveBot","createElementNS","editOriginals","topReverse","copyReverse","copyChunk","origEnd","editEnd","revertChunk","origLeft","origRight","hasLeft","hasRight","panes","leftPane","buildGap","editPane","rightPane","wrapElt","collapseIdentical","collapseIdenticalStretches","resizeInterval","lock","lockWrap","gapElts","revertButtons","createSVGRect","startEdit","startOrig","startOff","cleanFromEdit","cleanFromOrig","endOff","cleanToEdit","cleanToOrig","nInEdit","beforeE","afterE","beforeO","afterO","fromLocal","toLocal","collapseSingle","collapseStretch","unclearNearChunks","onCollapse","rightOriginal","leftOriginal","rightChunks","leftChunks","F_WIDGET","F_WIDGET_BELOW","F_MARKER","_","_min","hasMarker","hasWidgetBelow","hasWidget","nBefore","nAfter","findPrevDiff","findNextDiff","goNearbyDiff","views","flag","widgetFrom","widgetTo","goNextDiff","goPrevDiff","wordRegexp","words","wordOperators","commonKeywords","commonBuiltins","scopes","conf","parserConf","ERRORCLASS","delimiters","singleDelimiters","operators","singleOperators","doubleOperators","doubleDelimiters","tripleDelimiters","hangingIndent","myKeywords","myBuiltins","extra_keywords","extra_builtins","py3","identifiers","stringPrefixes","keywords","builtins","tokenBase","lastToken","scopeOffset","lineOffset","pushPyScope","errorToken","tokenBaseInner","inFormat","floatLiteral","intLiteral","isFmtString","tokenize","formatStringFactory","tokenStringFactory","delimiter","tokenOuter","singleline","OUTCLASS","tokenNestedExpr","depth","tokenString","singleLineStringErrors","isString","pushBracketScope","tokenLexer","beginningOfLine","lambda","delimiter_index","external","basecolumn","addErr","scope","closeBrackets","triples","lineComment","fold","$","getBuiltIn","uncurryThis","fails","$stringify","numberToString","tester","low","hi","fix","FORCED","stat","forced","stringify","it","replacer","parserConfig","statementIndent","jsonldMode","jsonld","jsonMode","json","trackScope","isTS","typescript","wordRE","wordCharacters","kw","A","B","C","D","operator","atom","isOperatorChar","isJsonldKeyword","readRegexp","escaped","inSet","ret","cont","tokenComment","expressionAllowed","tokenQuasi","lexical","lastType","quote","maybeEnd","brackets","findFatArrow","fatArrowAt","arrow","sawSomething","bracket","atomicTypes","JSLexical","inScope","varname","localVars","cx","vars","parseJS","cc","combinator","expression","statement","lex","pass","inList","register","block","newContext","registerVarScoped","Var","globalVars","isModifier","defaultVars","pushcontext","pushblockcontext","popcontext","pushlex","poplex","expect","wanted","exp","vardef","parenExpr","maybeexpression","maybeelse","functiondef","forspec","enumdef","typename","typeexpr","maybelabel","maybeCatchBinding","afterExport","afterImport","funarg","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","classExpression","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","expr","property","continueQuasi","targetNoComma","maybeTypeArgs","getterSetter","afterprop","maybetype","what","sep","proceed","maybetypeOrIn","mayberettype","isKW","afterType","typeprops","typearg","maybeReturnType","quasiType","typeprop","functiondecl","continueQuasiType","typeparam","maybeTypeDefault","maybeAssign","vardefCont","eltpattern","proppattern","_type","forspec1","forspec2","classNameAfter","classBody","classfield","isInterface","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","enummember","isContinuedStatement","firstChar","c","doubleIndentSwitch","blockCommentStart","blockCommentEnd","blockCommentContinue","skipExpression"],"mappings":"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","file":"js/about~layout~tools.ff373eeb.js","sourcesContent":["<template>\n  <Codemirror\n    v-model:value=\"code\"\n    :options=\"cmOptions\"\n    border\n    placeholder=\" placeholder\"\n    text-align=\"left\"\n    @change=\"onChange\"\n    style=\"text-align: left\"\n  />\n</template>\n\n<script>\nimport Codemirror from \"codemirror-editor-vue3\";\n// language\nimport \"codemirror/mode/javascript/javascript.js\";\nimport \"codemirror/mode/python/python.js\";\n\n\nimport { ref } from \"vue\";\nexport default {\n  name: \"MyCodemirror\",\n  props: {\n    msg: String,\n  },\n  components: { Codemirror },\n  setup() {\n    const code = ref();\n\n    return {\n\n      code,\n      cmOptions: {\n        mode: \"python\", // \n        theme: \"default\", // \n        lineNumbers: true, // \n        smartIndent: true, // \n        indentUnit: 2, // 4\n        foldGutter: true, // \n        styleActiveLine: true, // \n        completeSingle: false,\n        lineWrapping: true,\n      },\n      onChange() {\n        // console.log(code);\n      },\n    };\n  },\n\n}\n</script>","var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nimport _CodeMirror from \"codemirror\";\nimport { defineComponent, ref, onMounted, markRaw, watch, unref, openBlock, createElementBlock, computed, nextTick, shallowRef, getCurrentInstance, onBeforeUnmount, normalizeClass, normalizeStyle, createBlock, resolveDynamicComponent, mergeProps } from \"vue\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/addon/merge/merge.css\";\nimport \"codemirror/addon/merge/merge.js\";\nimport DiffMatchPatch from \"diff-match-patch\";\nimport \"codemirror/addon/mode/simple.js\";\nvar _export_sfc = (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n};\nconst CodeMirror$3 = window.CodeMirror || _CodeMirror;\nconst _sfc_main$3 = defineComponent({\n  name: \"DefaultMode\",\n  props: {\n    name: {\n      type: String,\n      default: `cm-textarea-${+new Date()}`\n    },\n    value: {\n      type: String,\n      default: \"\"\n    },\n    content: {\n      type: String,\n      default: \"\"\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => null\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: {\n    ready: (instance) => instance,\n    \"update:cminstance\": (instance) => instance\n  },\n  setup(props, { emit }) {\n    const textarea = ref();\n    const _cminstance = ref(null);\n    const initialize = () => {\n      _cminstance.value = markRaw(CodeMirror$3.fromTextArea(textarea.value, props.options));\n      emit(\"update:cminstance\", _cminstance.value);\n      const unwatch = watch(() => props.cminstance, (val) => {\n        var _a;\n        val && ((_a = props.cminstance) == null ? void 0 : _a.setValue(props.value || props.content));\n        emit(\"ready\", unref(_cminstance));\n        unwatch == null ? void 0 : unwatch();\n      }, { deep: true });\n    };\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      textarea,\n      initialize\n    };\n  }\n});\nconst _hoisted_1$2 = [\"name\", \"placeholder\"];\nfunction _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"textarea\", {\n    ref: \"textarea\",\n    name: _ctx.$props.name,\n    placeholder: _ctx.$props.placeholder\n  }, null, 8, _hoisted_1$2);\n}\nvar Default = /* @__PURE__ */ _export_sfc(_sfc_main$3, [[\"render\", _sfc_render$2]]);\nconst CodeMirror$2 = (window == null ? void 0 : window.CodeMirror) || _CodeMirror;\nwindow.diff_match_patch = DiffMatchPatch;\nwindow.DIFF_DELETE = -1;\nwindow.DIFF_INSERT = 1;\nwindow.DIFF_EQUAL = 0;\nconst _sfc_main$2 = defineComponent({\n  name: \"MergeMode\",\n  props: {\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: [\"update:cminstance\", \"ready\"],\n  setup(props, { emit }) {\n    const _cminstance = ref();\n    const mergeView = ref();\n    const initialize = () => {\n      _cminstance.value = markRaw(CodeMirror$2.MergeView(mergeView.value, props.options));\n      emit(\"update:cminstance\", _cminstance.value);\n      emit(\"ready\", _cminstance);\n    };\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      mergeView,\n      initialize\n    };\n  }\n});\nconst _hoisted_1$1 = { ref: \"mergeView\" };\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$1, null, 512);\n}\nvar Merge = /* @__PURE__ */ _export_sfc(_sfc_main$2, [[\"render\", _sfc_render$1]]);\nvar logErrorType;\n(function(logErrorType2) {\n  logErrorType2[\"info\"] = \"info\";\n  logErrorType2[\"warning\"] = \"warning\";\n  logErrorType2[\"error\"] = \"error\";\n})(logErrorType || (logErrorType = {}));\nfunction getLocalTime() {\n  const date = new Date();\n  const h = date.getHours() < 10 ? `0${date.getHours()}` : date.getHours();\n  const m = date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes();\n  const s = date.getSeconds() < 10 ? `0${date.getSeconds()}` : date.getSeconds();\n  return `${h}:${m}:${s}`;\n}\nfunction createLinkMark(attrs) {\n  return `#link#${JSON.stringify(attrs)}#link#`;\n}\nfunction getLinkMarks(value) {\n  const linkRegexp = /#link#(.+)#link#/g;\n  const result = [];\n  let indexObj;\n  indexObj = linkRegexp.exec(value);\n  while (indexObj) {\n    const node = document.createElement(\"a\");\n    const attrs = JSON.parse(indexObj[1]);\n    const keyAndValues = Object.entries(attrs);\n    for (const [_key, _value] of keyAndValues) {\n      node.setAttribute(_key, _value);\n    }\n    node.className = \"editor_custom_link\";\n    node.innerHTML = \"logDownload\";\n    result.push({\n      start: indexObj.index,\n      end: indexObj.index + indexObj[0].length,\n      node\n    });\n    indexObj = linkRegexp.exec(value);\n  }\n  return result;\n}\nfunction createLogMark(text = \"\", type = \"info\") {\n  return `#log<${type}>log#${text}#log<${type}>log#`;\n}\nfunction getLogMark(value) {\n  const result = [];\n  function match() {\n    const logRegexp = /#log<(\\w*)>log#((.|\\r\\n|\\n)*?)#log<(\\w*)>log#/g;\n    let indexObj;\n    indexObj = logRegexp.exec(value);\n    while (indexObj) {\n      const text = indexObj[0].replace(/\\r\\n/g, \"\\n\");\n      const textArr = text.split(\"\\n\");\n      const content = indexObj[2].replace(/\\r\\n/g, \"\\n\");\n      const contentArr = content.split(\"\\n\");\n      const node = document.createElement(\"span\");\n      const type = indexObj[1];\n      node.className = `c-editor--log__${type}`;\n      let offset = 0;\n      for (let i = 0; i < textArr.length; i++) {\n        const textItem = textArr[i];\n        const contentItem = contentArr[i];\n        const cloneNode = node.cloneNode(false);\n        cloneNode.innerText = contentItem;\n        result.push({\n          start: indexObj.index + offset,\n          end: indexObj.index + offset + textItem.length,\n          node: cloneNode\n        });\n        offset = offset + textItem.length + 1;\n      }\n      indexObj = logRegexp.exec(value);\n    }\n  }\n  match();\n  return result;\n}\nfunction createLog(log, type = \"\") {\n  const now = getLocalTime();\n  return `[${now}] <${type}> ${log}`;\n}\nfunction createTitle(title, symbolLength, symbol) {\n  const arr = new Array(Math.max(symbolLength || 15, 5));\n  const wraptext = arr.join(symbol || \"=\");\n  return `${wraptext}${title}${wraptext}`;\n}\nconst startRegex = [\n  {\n    regex: /(\\[.*?\\])([ \\t]*)(<error>[ \\t])(.+)/,\n    token: [\"tag\", \"\", \"error.strong\", \"error.strong\"],\n    sol: true\n  },\n  {\n    regex: /(\\[.*?\\])([ \\t]*)(<info>)(.+)(.?)/,\n    token: [\"tag\", \"\", \"bracket\", \"bracket\", \"hr\"],\n    sol: true\n  },\n  {\n    regex: /(\\[.*?\\])([ \\t]*)(<warning>)(.+)(.?)/,\n    token: [\"tag\", \"\", \"comment\", \"comment\", \"hr\"],\n    sol: true\n  }\n];\n_CodeMirror.defineSimpleMode(\"fclog\", {\n  start: [\n    ...startRegex,\n    {\n      regex: /.*/,\n      token: \"hr\"\n    }\n  ],\n  error: [\n    ...startRegex,\n    {\n      regex: /.*/,\n      token: \"error.strong\"\n    }\n  ],\n  info: [\n    ...startRegex,\n    {\n      regex: /.*/,\n      token: \"bracket\"\n    }\n  ],\n  warning: [\n    ...startRegex,\n    {\n      regex: /.*\\[/,\n      token: \"comment\"\n    }\n  ]\n});\n_CodeMirror.defineSimpleMode(\"log\", {\n  start: [\n    {\n      regex: /^[=]+[^=]*[=]+/,\n      token: \"strong\"\n    },\n    {\n      regex: /([^\\w])([A-Z][\\w]*)/,\n      token: [\"\", \"string\"]\n    },\n    {\n      regex: /(^[A-Z][\\w]*)/,\n      token: \"string\"\n    }\n  ]\n});\nconst CodeMirror$1 = window.CodeMirror || _CodeMirror;\nconst _sfc_main$1 = defineComponent({\n  name: \"CodemirrorFclog\",\n  props: {\n    value: {\n      type: String,\n      default: \"\"\n    },\n    name: {\n      type: String,\n      default: `cm-textarea-${+new Date()}`\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => ({})\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"update:cminstance\", \"ready\"],\n  setup(props, { emit }) {\n    const textarea = ref();\n    const _cminstance = ref(null);\n    const renderTextMark = (cminstance = props.cminstance) => {\n      const marks = cminstance.getAllMarks();\n      marks.forEach((mark) => mark.clear());\n      const value = cminstance.getValue();\n      const linkMarks = [].concat(getLinkMarks(value)).concat(getLogMark(value));\n      for (let _i = 0; _i < linkMarks.length; _i++) {\n        const mark = linkMarks[_i];\n        cminstance.markText(cminstance.posFromIndex(mark.start), cminstance.posFromIndex(mark.end), { replacedWith: mark.node });\n      }\n    };\n    const initialize = () => {\n      var _a;\n      _cminstance.value = markRaw(CodeMirror$1.fromTextArea(textarea.value, props.options));\n      emit(\"update:cminstance\", unref(_cminstance));\n      (_a = _cminstance.value) == null ? void 0 : _a.on(\"change\", renderTextMark);\n    };\n    watch(() => props.cminstance, (val) => {\n      var _a;\n      if (val) {\n        renderTextMark(props.cminstance);\n        (_a = props.cminstance) == null ? void 0 : _a.setValue(props.value);\n        emit(\"ready\", _cminstance);\n      }\n    }, { deep: true, immediate: true });\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      initialize,\n      textarea\n    };\n  }\n});\nconst _hoisted_1 = [\"name\", \"placeholder\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"textarea\", {\n    ref: \"textarea\",\n    name: _ctx.$props.name,\n    placeholder: _ctx.$props.placeholder\n  }, null, 8, _hoisted_1);\n}\nvar FcLog = /* @__PURE__ */ _export_sfc(_sfc_main$1, [[\"render\", _sfc_render]]);\nconst componentsEvts = {\n  \"update:value\": (value) => value,\n  change: (value, cm) => ({ value, cm }),\n  input: (value) => value,\n  ready: (cm) => cm\n};\nconst cmEvts = [\n  \"changes\",\n  \"scroll\",\n  \"beforeChange\",\n  \"cursorActivity\",\n  \"keyHandled\",\n  \"inputRead\",\n  \"electricInput\",\n  \"beforeSelectionChange\",\n  \"viewportChange\",\n  \"swapDoc\",\n  \"gutterClick\",\n  \"gutterContextMenu\",\n  \"focus\",\n  \"blur\",\n  \"refresh\",\n  \"optionChange\",\n  \"scrollCursorIntoView\",\n  \"update\"\n];\nconst getCmEvts = () => {\n  const result = {};\n  cmEvts.forEach((name) => {\n    result[name] = (...args) => args;\n  });\n  return result;\n};\nconst DEFAULT_OPTIONS = {\n  mode: \"text\",\n  theme: \"default\",\n  lineNumbers: true,\n  smartIndent: true,\n  indentUnit: 2\n};\nfunction scrollToEnd(cm) {\n  Promise.resolve().then(() => {\n    const nowScrollInfo = cm.getScrollInfo();\n    cm.scrollTo(nowScrollInfo.left, nowScrollInfo.height);\n  });\n}\nconst useEvents = ({\n  props,\n  cminstance,\n  emit,\n  internalInstance,\n  content\n}) => {\n  const realCm = computed(() => {\n    var _a;\n    return props.merge ? (_a = unref(cminstance)) == null ? void 0 : _a.editor() : unref(cminstance);\n  });\n  const getBindEvents = () => {\n    const evts = [];\n    Object.keys(internalInstance == null ? void 0 : internalInstance.vnode.props).forEach((v) => {\n      if (v.startsWith(\"on\")) {\n        const e = v.replace(v[2], v[2].toLowerCase()).slice(2);\n        !componentsEvts[e] && evts.push(e);\n      }\n    });\n    return evts;\n  };\n  const listenerEvents = () => {\n    realCm.value.on(\"change\", (cm) => {\n      const currentVal = cm.getValue();\n      if (currentVal === content.value)\n        return;\n      content.value = currentVal;\n      emit(\"update:value\", content.value);\n      emit(\"input\", content.value);\n      Promise.resolve().then(() => {\n        emit(\"change\", content.value, cm);\n      });\n      props.keepCursorInEnd && scrollToEnd(cm);\n    });\n    const tmpEvents = {};\n    const bindEvts = getBindEvents();\n    bindEvts.filter((e) => !tmpEvents[e] && (tmpEvents[e] = true)).forEach((event) => {\n      realCm.value.on(event, (...args) => {\n        emit(event, ...args);\n      });\n    });\n  };\n  return {\n    listenerEvents\n  };\n};\nfunction useViewControl({\n  props,\n  cminstance,\n  presetRef\n}) {\n  const containerWidth = ref(null);\n  const containerHeight = ref(null);\n  const realCm = computed(() => {\n    var _a;\n    return props.merge ? (_a = unref(cminstance)) == null ? void 0 : _a.editor() : unref(cminstance);\n  });\n  const refresh = () => {\n    nextTick(() => {\n      var _a;\n      (_a = realCm.value) == null ? void 0 : _a.refresh();\n    });\n  };\n  const resize = (width = props.width, height = props.height) => {\n    var _a;\n    containerWidth.value = String(width).replace(\"px\", \"\");\n    containerHeight.value = String(height).replace(\"px\", \"\");\n    const cmHeight = containerHeight.value;\n    (_a = realCm.value) == null ? void 0 : _a.setSize(containerWidth.value, cmHeight);\n  };\n  const destroy = () => {\n    var _a;\n    const element = (_a = realCm.value) == null ? void 0 : _a.getWrapperElement();\n    element == null ? void 0 : element.remove();\n  };\n  const reload = () => {\n    var _a, _b, _c;\n    const history = (_a = realCm.value) == null ? void 0 : _a.getDoc().getHistory();\n    (_b = presetRef.value) == null ? void 0 : _b.initialize();\n    destroy();\n    (_c = realCm.value) == null ? void 0 : _c.getDoc().setHistory(history);\n  };\n  const isStyleChaotic = () => {\n    const gutterEl = document.querySelector(\".CodeMirror-gutters\");\n    const gutterElLeft = gutterEl == null ? void 0 : gutterEl.style.left.replace(\"px\", \"\");\n    return gutterElLeft !== \"0\";\n  };\n  const reviseStyle = () => {\n    refresh();\n    if (!isStyleChaotic())\n      return;\n    const timer = setInterval(() => {\n      isStyleChaotic() ? refresh() : clearInterval(timer);\n    }, 60);\n    const clearTimer = setTimeout(() => {\n      clearInterval(timer);\n      clearTimeout(clearTimer);\n    }, 400);\n  };\n  return {\n    reload,\n    refresh,\n    resize,\n    destroy,\n    containerHeight,\n    reviseStyle\n  };\n}\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  props: {\n    value: {\n      type: String,\n      default: \"\"\n    },\n    options: {\n      type: Object,\n      default: () => DEFAULT_OPTIONS\n    },\n    globalOptions: {\n      type: Object,\n      default: () => DEFAULT_OPTIONS\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    },\n    border: {\n      type: Boolean,\n      default: false\n    },\n    width: {\n      type: [String, Number],\n      default: null\n    },\n    height: {\n      type: [String, Number],\n      default: null\n    },\n    keepCursorInEnd: {\n      type: Boolean,\n      default: false\n    },\n    merge: {\n      type: Boolean,\n      default: false\n    },\n    name: {\n      type: String,\n      default: \"\"\n    },\n    marker: {\n      type: Function,\n      default: () => null\n    },\n    unseenLines: {\n      type: Array,\n      default: () => []\n    }\n  },\n  emits: __spreadValues(__spreadValues({}, componentsEvts), getCmEvts()),\n  setup(__props, { expose, emit }) {\n    var _a, _b;\n    const props = __props;\n    if (typeof Object.assign !== \"function\") {\n      Object.defineProperty(Object, \"assign\", {\n        value(target, varArgs) {\n          if (target == null) {\n            throw new TypeError(\"Cannot convert undefined or null to object\");\n          }\n          const to = Object(target);\n          for (let index2 = 1; index2 < arguments.length; index2++) {\n            const nextSource = arguments[index2];\n            if (nextSource != null) {\n              for (const nextKey in nextSource) {\n                if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                  to[nextKey] = nextSource[nextKey];\n                }\n              }\n            }\n          }\n          return to;\n        },\n        writable: true,\n        configurable: true\n      });\n    }\n    const cminstance = ref(null);\n    const content = ref(\"\");\n    const presetModeName = shallowRef(Default);\n    const cmOptions = ref(__spreadValues(__spreadValues(__spreadValues({}, DEFAULT_OPTIONS), props.globalOptions), props.options));\n    const internalInstance = getCurrentInstance();\n    const instanceName = props.name || ((_b = (_a = internalInstance == null ? void 0 : internalInstance.parent) == null ? void 0 : _a.type) == null ? void 0 : _b.name) || void 0;\n    const presetRef = ref(null);\n    const realCminstance = computed(() => {\n      var _a2;\n      return props.merge ? (_a2 = unref(cminstance)) == null ? void 0 : _a2.editor() : unref(cminstance);\n    });\n    const { refresh, resize, destroy, containerHeight, reviseStyle } = useViewControl({\n      props,\n      cminstance,\n      presetRef\n    });\n    const { listenerEvents } = useEvents({\n      props,\n      cminstance,\n      emit,\n      internalInstance,\n      content\n    });\n    const unseenLineMarkers = () => {\n      if (props.unseenLines !== void 0 && props.marker !== void 0) {\n        props.unseenLines.forEach((line) => {\n          var _a2, _b2;\n          const info = (_a2 = cminstance.value) == null ? void 0 : _a2.lineInfo(line);\n          (_b2 = cminstance.value) == null ? void 0 : _b2.setGutterMarker(line, \"breakpoints\", (info == null ? void 0 : info.gutterMarkers) ? null : props.marker());\n        });\n      }\n    };\n    const onCodeChange = (newVal) => {\n      var _a2, _b2;\n      const CM_VALUE = (_a2 = cminstance.value) == null ? void 0 : _a2.getValue();\n      if (newVal !== CM_VALUE) {\n        (_b2 = cminstance.value) == null ? void 0 : _b2.setValue(newVal);\n        content.value = newVal;\n        reviseStyle();\n      }\n      unseenLineMarkers();\n    };\n    const ready = () => {\n      listenerEvents();\n      unseenLineMarkers();\n      resize();\n      emit(\"ready\", cminstance.value);\n      watch([() => props.width, () => props.height], ([width, height]) => {\n        resize(width, height);\n      }, { deep: true });\n    };\n    const handlePresetModeName = () => {\n      if (props.options.mode === \"fclog\" || props.options.mode === \"log\") {\n        presetModeName.value = FcLog;\n        return;\n      }\n      if (props.merge) {\n        presetModeName.value = Merge;\n        return;\n      }\n      presetModeName.value = Default;\n    };\n    watch(() => props.options, (val) => {\n      var _a2;\n      for (const key in props.options) {\n        (_a2 = realCminstance.value) == null ? void 0 : _a2.setOption(key, unref(val[key]));\n      }\n    }, { deep: true });\n    watch(() => props.value, (val) => {\n      onCodeChange(val);\n    });\n    watch(() => props.placeholder, (val) => {\n      var _a2;\n      (_a2 = realCminstance.value) == null ? void 0 : _a2.setOption(\"placeholder\", val);\n    });\n    watch(() => props.merge, (val) => {\n      handlePresetModeName();\n    }, { immediate: true });\n    onBeforeUnmount(() => {\n      destroy();\n    });\n    expose({\n      cminstance,\n      resize,\n      refresh,\n      destroy\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([\"codemirror-container\", {\n          merge: _ctx.$props.merge,\n          bordered: _ctx.$props.border || _ctx.$props.merge,\n          \"width-auto\": !_ctx.$props.width || _ctx.$props.width == \"100%\",\n          \"height-auto\": !_ctx.$props.height || _ctx.$props.height == \"100%\"\n        }]),\n        style: normalizeStyle({\n          height: unref(containerHeight) + \"px\"\n        })\n      }, [\n        (openBlock(), createBlock(resolveDynamicComponent(unref(presetModeName)), mergeProps({\n          ref_key: \"presetRef\",\n          ref: presetRef,\n          cminstance: cminstance.value,\n          \"onUpdate:cminstance\": _cache[0] || (_cache[0] = ($event) => cminstance.value = $event),\n          style: { \"height\": \"100%\" }\n        }, __spreadProps(__spreadValues(__spreadValues({}, _ctx.$props), _ctx.$attrs), {\n          options: cmOptions.value,\n          name: unref(instanceName),\n          content: content.value\n        }), { onReady: ready }), null, 16, [\"cminstance\"]))\n      ], 6);\n    };\n  }\n});\nvar index = \"\";\nconst install = (app, config) => {\n  if (config) {\n    if (config.options) {\n      _sfc_main.props.globalOptions.default = () => config.options;\n    }\n  }\n  app.component((config == null ? void 0 : config.componentName) || \"Codemirror\", _sfc_main);\n  return app;\n};\nconst CodeMirror = window.CodeMirror || _CodeMirror;\nconst GlobalCmComponent = install;\nfunction styleInject(css,ref){if(ref===void 0){ref={}}var insertAt=ref.insertAt;if(!css||typeof document===\"undefined\"){return}var head=document.head||document.getElementsByTagName(\"head\")[0];var style=document.createElement(\"style\");style.type=\"text/css\";if(insertAt===\"top\"){if(head.firstChild){head.insertBefore(style,head.firstChild)}else{head.appendChild(style)}}else{head.appendChild(style)}if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}};styleInject(`.codemirror-container {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  width: fit-content;\n  font-size: 12px;\n  overflow: hidden;\n}\n.codemirror-container.bordered {\n  border-radius: 4px;\n  border: 1px solid #dddddd;\n}\n.codemirror-container.width-auto {\n  width: 100%;\n}\n.codemirror-container.height-auto {\n  height: 100%;\n}\n.codemirror-container.height-auto .CodeMirror,\n.codemirror-container.height-auto .cm-s-default {\n  height: 100% !important;\n}\n.CodeMirror-lines .CodeMirror-placeholder.CodeMirror-line-like {\n  color: #666;\n}\n.CodeMirror,\n.CodeMirror-merge-pane {\n  height: 100%;\n  font-family: consolas !important;\n}\n.CodeMirror-merge,\n.CodeMirror-merge-right .CodeMirror {\n  height: 100%;\n  border: none !important;\n}\n.editor_custom_link {\n  cursor: pointer;\n  color: #1474f1;\n  text-decoration: underline;\n}\n.editor_custom_link:hover {\n  color: #04b4fa;\n}\n.c-editor--log__error {\n  color: #bb0606;\n  font-weight: bold;\n}\n.c-editor--log__info {\n  color: #333333;\n  font-weight: bold;\n}\n.c-editor--log__warning {\n  color: #ee9900;\n}\n.c-editor--log__success {\n  color: #669600;\n}\n.cm-header,\n.cm-strong {\n  font-weight: bold;\n}\n`);\nexport { CodeMirror, GlobalCmComponent, _sfc_main as VueCodemirror, createLinkMark, createLog, createLogMark, createTitle, _sfc_main as default, getLinkMarks, getLocalTime, getLogMark, logErrorType };\n","import { render } from \"./VueCodemirror.vue?vue&type=template&id=927081a8\"\nimport script from \"./VueCodemirror.vue?vue&type=script&lang=js\"\nexport * from \"./VueCodemirror.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/project/vue_apitest/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = safari && (/Mobile\\/\\w+/.test(userAgent) || navigator.maxTouchPoints > 2);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 50;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); at += isRTL; }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n\n  // Add a span to a line.\n  function addMarkedSpan(line, span, op) {\n    var inThisOp = op && window.WeakSet && (op.markedSpans || (op.markedSpans = new WeakSet));\n    if (inThisOp && inThisOp.has(line.markedSpans)) {\n      line.markedSpans.push(span);\n    } else {\n      line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n      if (inThisOp) { inThisOp.add(line.markedSpans); }\n    }\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css || attributes) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      gutterWrap.setAttribute(\"aria-hidden\", \"true\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    if (lineView.rest) {\n      for (var i = 0; i < lineView.rest.length; i++)\n        { if (lineView.rest[i] == line)\n          { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n      for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n        { if (lineNo(lineView.rest[i$1]) > lineN)\n          { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n    }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var ref = visualLine(lineObj);\n    var widgets = ref.widgets;\n    var height = 0;\n    if (widgets) { for (var i = 0; i < widgets.length; ++i) { if (widgets[i].above)\n      { height += widgetHeight(widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e$1) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    var customCursor = cm.options.$customCursor;\n    if (customCursor) { primary = true; }\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range.empty();\n      if (customCursor) {\n        var head = customCursor(cm, range);\n        if (head) { drawSelectionCursor(cm, head, curFragment); }\n      } else if (collapsed || cm.options.showCursorWhenSelecting) {\n        drawSelectionCursor(cm, range.head, curFragment);\n      }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (/\\bcm-fat-cursor\\b/.test(cm.getWrapperElement().className)) {\n      var charPos = charCoords(cm, head, \"div\", null, null);\n      var width = charPos.right - charPos.left;\n      cursor.style.width = (width > 0 ? width : cm.defaultCharWidth()) + \"px\";\n    }\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () {\n        if (!cm.hasFocus()) { onBlur(cm); }\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.hasFocus()) {\n      cm.display.input.focus();\n      if (!cm.state.focused) { onFocus(cm); }\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      if (cm.state.focused) { onBlur(cm); }\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent && !cm.state.draggingText) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    var viewTop = Math.max(0, display.scroller.getBoundingClientRect().top);\n    var oldHeight = display.lineDiv.getBoundingClientRect().top;\n    var mustScroll = 0;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      oldHeight += cur.line.height;\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        if (oldHeight < viewTop) { mustScroll -= diff; }\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n    if (Math.abs(mustScroll) > 2) { display.scroller.scrollTop += mustScroll; }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;\n    var screenw = displayWidth(cm) - display.gutters.offsetWidth;\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.scrollTop = 0;\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId,          // Unique ID\n      markArrays: null         // Used by addMarkedSpan\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n        snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n    // Send an event to consumers responding to changes in gutter width.\n    signalLater(display, \"gutterChanged\", display);\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // This attribute is respected by automatic translation systems such as Google Translate,\n    // and may also be respected by tools used by human translators.\n    d.wrapper.setAttribute('translate', 'no');\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n    var pixelsPerUnit = wheelPixelsPerUnit;\n    if (e.deltaMode === 0) {\n      dx = e.deltaX;\n      dy = e.deltaY;\n      pixelsPerUnit = 1;\n    }\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && pixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * pixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * pixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && pixelsPerUnit != null) {\n      var pixels = dy * pixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20 && e.deltaMode !== 0) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    cm.options.direction = doc.direction;\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(prev) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = prev ? prev.undoDepth : Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = prev ? prev.maxGeneration : 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm && doc.cm.getOption(\"readOnly\") != \"nocursor\")\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null), doc.cm && doc.cm.curOp);\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      if (lineSep === '') { return lines.join('') }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head || ranges[i].anchor)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {\n      var this$1 = this;\n\n      this.history = new History(this.history);\n      linkedDocs(this, function (doc) { return doc.history = this$1.history; }, true);\n    },\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var markAsReadAndPasteIfAllFilesAreRead = function () {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(\n                              text.filter(function (t) { return t != null; }).join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n      var readTextFromFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return\n        }\n        var reader = new FileReader;\n        reader.onerror = function () { return markAsReadAndPasteIfAllFilesAreRead(); };\n        reader.onload = function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return\n          }\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < files.length; i++) { readTextFromFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e$1){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 224: \"Mod\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\", \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\", \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") { dir = -dir; }\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"codepoint\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      if (cm.state.delayingBlurEvent) {\n        if (cm.hasFocus()) { cm.state.delayingBlurEvent = false; }\n        else { delayBlurEvent(cm); }\n      }\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if ((webkit && !safari) || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { return display.input.focus(); }, 20);\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    if (ie) { delayBlurEvent(cm); }\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e$1) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = (val === '') ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(function () {\n        if (this$1.hasFocus() && !this$1.state.focused) { onFocus(this$1); }\n      }, 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) { onContextMenu(cm, e); }\n    });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\"))\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n  // doesn't cross line boundaries), \"word\" (across next word), or\n  // \"group\" (to the start of next group of word or\n  // non-word-non-whitespace chars). The visually param controls\n  // whether, in right-to-left text, direction 1 means to move towards\n  // the next index in the string, or towards the character to the right\n  // of the current position. The resulting position will have a\n  // hitSide=true property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n    function findNextLine() {\n      var l = pos.line + lineDir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (unit == \"codepoint\") {\n        var ch = lineObj.text.charCodeAt(pos.ch + (dir > 0 ? 0 : -1));\n        if (isNaN(ch)) {\n          next = null;\n        } else {\n          var astral = dir > 0 ? ch >= 0xD800 && ch < 0xDC00 : ch >= 0xDC00 && ch < 0xDFFF;\n          next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (astral ? 2 : 1))), -dir);\n        }\n      } else if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\" || unit == \"codepoint\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    div.contentEditable = true;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) { return true }\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) { break }\n      }\n      return false\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = activeElt();\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = activeElt() == this.div;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || activeElt() != this.div)\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n      var this$1 = this;\n\n    var input = this;\n    if (this.selectionInEditor())\n      { setTimeout(function () { return this$1.pollSelection(); }, 20); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n    this.textarea.readOnly = !!val;\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, */) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.65.2\";\n\n  return CodeMirror;\n\n})));\n","/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function() {\n\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0;\n  // Cost of an empty edit operation in terms of edit characters.\n  this.Diff_EditCost = 4;\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n  this.Match_Threshold = 0.5;\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n  this.Match_Distance = 1000;\n  // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n  this.Patch_DeleteThreshold = 0.5;\n  // Chunk size for context length.\n  this.Patch_Margin = 4;\n\n  // The number of bits in an int.\n  this.Match_MaxBits = 32;\n};\n\n\n//  DIFF FUNCTIONS\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\ndiff_match_patch.Diff = function(op, text) {\n  return [op, text];\n};\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_main = function(text1, text2, opt_checklines,\n    opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = (new Date).getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n  var deadline = opt_deadline;\n\n  // Check for null inputs.\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  }\n\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n    return [];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n  var checklines = opt_checklines;\n\n  // Trim off common prefix (speedup).\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_compute_ = function(text1, text2, checklines,\n    deadline) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)),\n             new diff_match_patch.Diff(DIFF_EQUAL, shorttext),\n             new diff_match_patch.Diff(DIFF_INSERT,\n                 longtext.substring(i + shorttext.length))];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1),\n            new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = this.diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\n    // Merge the results.\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)],\n                          diffs_b);\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n\n  return this.diff_bisect_(text1, text2, deadline);\n};\n\n\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_lineMode_ = function(text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n\n  var diffs = this.diff_main(text1, text2, false, deadline);\n\n  // Convert the diff back to original text.\n  this.diff_charsToLines_(diffs, linearray);\n  // Eliminate freak matches (e.g. blank lines)\n  this.diff_cleanupSemantic(diffs);\n\n  // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert,\n                       count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff =\n              this.diff_main(text_delete, text_insert, false, deadline);\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n          pointer = pointer + subDiff.length;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n    pointer++;\n  }\n  diffs.pop();  // Remove the dummy entry at the end.\n\n  return diffs;\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisect_ = function(text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if ((new Date()).getTime() > deadline) {\n      break;\n    }\n\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1),\n          new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisectSplit_ = function(text1, text2, x, y,\n    deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\ndiff_match_patch.prototype.diff_linesToChars_ = function(text1, text2) {\n  var lineArray = [];  // e.g. lineArray[4] == 'Hello\\n'\n  var lineHash = {};   // e.g. lineHash['Hello\\n'] == 4\n\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n  lineArray[0] = '';\n\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n  function diff_linesToCharsMunge_(text) {\n    var chars = '';\n    // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n    var lineStart = 0;\n    var lineEnd = -1;\n    // Keeping our own length variable is faster than looking it up.\n    var lineArrayLength = lineArray.length;\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n      var line = text.substring(lineStart, lineEnd + 1);\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\n          (lineHash[line] !== undefined)) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n      lineStart = lineEnd + 1;\n    }\n    return chars;\n  }\n  // Allocate 2/3rds of the space for text1, the rest for text2.\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {chars1: chars1, chars2: chars2, lineArray: lineArray};\n};\n\n\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\ndiff_match_patch.prototype.diff_charsToLines_ = function(diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n    diffs[i][1] = text.join('');\n  }\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\ndiff_match_patch.prototype.diff_commonPrefix = function(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\ndiff_match_patch.prototype.diff_commonSuffix = function(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\ndiff_match_patch.prototype.diff_commonOverlap_ = function(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (found == 0 || text1.substring(text_length - length) ==\n        text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\ndiff_match_patch.prototype.diff_halfMatch_ = function(text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n  var dmp = this;  // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i),\n                                               shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i),\n                                               shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemantic = function(diffs) {\n  var changes = false;\n  var equalities = [];  // Stack of indices where equalities are found.\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0;  // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {  // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (lastEquality && (lastEquality.length <=\n          Math.max(length_insertions1, length_deletions1)) &&\n          (lastEquality.length <= Math.max(length_insertions2,\n                                           length_deletions2))) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0,\n                     new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0;  // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n  this.diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE &&\n        diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 ||\n            overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n              insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] =\n              deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 ||\n            overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n              deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] =\n              insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] =\n              deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n};\n\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 &&\n        char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 &&\n        char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 &&\n        char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 &&\n        char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 &&\n        one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 &&\n        two.match(diff_match_patch.blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) +\n            diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n};\n\n// Define some regex patterns for matching boundaries.\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupEfficiency = function(diffs) {\n  var changes = false;\n  var equalities = [];  // Stack of indices where equalities are found.\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0;  // Index of current position.\n  // Is there an insertion operation before the last equality.\n  var pre_ins = false;\n  // Is there a deletion operation before the last equality.\n  var pre_del = false;\n  // Is there an insertion operation after the last equality.\n  var post_ins = false;\n  // Is there a deletion operation after the last equality.\n  var post_del = false;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost &&\n          (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n      post_ins = post_del = false;\n    } else {  // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n      if (lastEquality && ((pre_ins && pre_del && post_ins && post_del) ||\n                           ((lastEquality.length < this.Diff_EditCost / 2) &&\n                            (pre_ins + pre_del + post_ins + post_del) == 3))) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0,\n                     new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--;  // Throw away the equality we just deleted;\n        lastEquality = null;\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--;  // Throw away the previous equality.\n          pointer = equalitiesLength > 0 ?\n              equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupMerge = function(diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n                    text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n          if (text_delete.length) {\n            diffs.splice(pointer, 0,\n                new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n          if (text_insert.length) {\n            diffs.splice(pointer, 0,\n                new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\ndiff_match_patch.prototype.diff_xIndex = function(diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {  // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n    if (diffs[x][0] !== DIFF_DELETE) {  // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n    if (chars1 > loc) {  // Overshot the location.\n      break;\n    }\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  }\n  // Was the location was deleted?\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  }\n  // Add the remaining character length.\n  return last_chars2 + (loc - last_chars1);\n};\n\n\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\ndiff_match_patch.prototype.diff_prettyHtml = function(diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];    // Operation (insert, delete, equal)\n    var data = diffs[x][1];  // Text of change.\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')\n        .replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n  return html.join('');\n};\n\n\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\ndiff_match_patch.prototype.diff_text1 = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\ndiff_match_patch.prototype.diff_text2 = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\ndiff_match_patch.prototype.diff_levenshtein = function(diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n\n\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\ndiff_match_patch.prototype.diff_toDelta = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n\n\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.diff_fromDelta = function(text1, delta) {\n  var diffs = [];\n  var diffsLength = 0;  // Keeping our own length var is faster in JS.\n  var pointer = 0;  // Cursor in text1\n  var tokens = delta.split(/\\t/g);\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] =\n              new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n        break;\n      case '-':\n        // Fall through.\n      case '=':\n        var n = parseInt(param, 10);\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n        var text = text1.substring(pointer, pointer += n);\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n        break;\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' +\n                          tokens[x]);\n        }\n    }\n  }\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer +\n        ') does not equal source text length (' + text1.length + ').');\n  }\n  return diffs;\n};\n\n\n//  MATCH FUNCTIONS\n\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\ndiff_match_patch.prototype.match_main = function(text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\ndiff_match_patch.prototype.match_bitap_ = function(text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  }\n\n  // Initialise the alphabet.\n  var s = this.match_alphabet_(pattern);\n\n  var dmp = this;  // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n    return accuracy + (proximity / dmp.Match_Distance);\n  }\n\n  // Highest score beyond which we give up.\n  var score_threshold = this.Match_Threshold;\n  // Is there a nearby exact match? (speedup)\n  var best_loc = text.indexOf(pattern, loc);\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    // What about in the other direction? (speedup)\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n    if (best_loc != -1) {\n      score_threshold =\n          Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  }\n\n  // Initialise the bit arrays.\n  var matchmask = 1 << (pattern.length - 1);\n  best_loc = -1;\n\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    }\n    // Use the result from this iteration as the maximum for the next.\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n      if (d === 0) {  // First pass: exact match.\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\n      } else {  // Subsequent passes: fuzzy match.\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\n                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\n                last_rd[j + 1];\n      }\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1);\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n    last_rd = rd;\n  }\n  return best_loc;\n};\n\n\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\ndiff_match_patch.prototype.match_alphabet_ = function(pattern) {\n  var s = {};\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\n  }\n  return s;\n};\n\n\n//  PATCH FUNCTIONS\n\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\ndiff_match_patch.prototype.patch_addContext_ = function(patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0;\n\n  // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) &&\n         pattern.length < this.Match_MaxBits - this.Patch_Margin -\n         this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding,\n                             patch.start2 + patch.length1 + padding);\n  }\n  // Add one chunk for good luck.\n  padding += this.Patch_Margin;\n\n  // Add the prefix.\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  }\n  // Add the suffix.\n  var suffix = text.substring(patch.start2 + patch.length1,\n                              patch.start2 + patch.length1 + padding);\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  }\n\n  // Roll back the start points.\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length;\n  // Extend the lengths.\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n\n\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_make = function(a, opt_b, opt_c) {\n  var text1, diffs;\n  if (typeof a == 'string' && typeof opt_b == 'string' &&\n      typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 = /** @type {string} */(a);\n    diffs = this.diff_main(text1, /** @type {string} */(opt_b), true);\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' &&\n      typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(a);\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' &&\n      typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 = /** @type {string} */(a);\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_b);\n  } else if (typeof a == 'string' && typeof opt_b == 'string' &&\n      opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 = /** @type {string} */(a);\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_c);\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return [];  // Get rid of the null case.\n  }\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0;  // Keeping our own length var is faster in JS.\n  var char_count1 = 0;  // Number of characters into the text1 string.\n  var char_count2 = 0;  // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text +\n                         postpatch_text.substring(char_count2);\n        break;\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) +\n                         postpatch_text.substring(char_count2 +\n                             diff_text.length);\n        break;\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin &&\n            patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0;\n            // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n        break;\n    }\n\n    // Update the current character count.\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  }\n  // Pick up the leftover patch if not empty.\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n\n\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_deepCopy = function(patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] =\n          new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n  return patchesCopy;\n};\n\n\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\ndiff_match_patch.prototype.patch_apply = function(patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  }\n\n  // Deep copy the patches so that no changes are made to originals.\n  patches = this.patch_deepCopy(patches);\n\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n\n  this.patch_splitMax(patches);\n  // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n  var delta = 0;\n  var results = [];\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits),\n                                  expected_loc);\n      if (start_loc != -1) {\n        end_loc = this.match_main(text,\n            text1.substring(text1.length - this.Match_MaxBits),\n            expected_loc + text1.length - this.Match_MaxBits);\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false;\n      // Subtract the delta for this failed patch from subsequent patches.\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) +\n               this.diff_text2(patches[x].diffs) +\n               text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n        if (text1.length > this.Match_MaxBits &&\n            this.diff_levenshtein(diffs) / text1.length >\n            this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n            if (mod[0] === DIFF_INSERT) {  // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] +\n                     text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {  // Deletion\n              text = text.substring(0, start_loc + index2) +\n                     text.substring(start_loc + this.diff_xIndex(diffs,\n                         index1 + mod[1].length));\n            }\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  }\n  // Strip the padding off.\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n\n\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\ndiff_match_patch.prototype.patch_addPadding = function(patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  }\n\n  // Bump all the patches forward.\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  }\n\n  // Add some padding on start of first diff.\n  var patch = patches[0];\n  var diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength;  // Should be 0.\n    patch.start2 -= paddingLength;  // Should be 0.\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  // Add some padding on end of last diff.\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n\n\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_splitMax = function(patches) {\n  var patch_size = this.Match_MaxBits;\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n    var bigpatch = patches[x];\n    // Remove the big old patch.\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n      while (bigpatch.diffs.length !== 0 &&\n             patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 &&\n                   patch.diffs[0][0] == DIFF_EQUAL &&\n                   diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0,\n              patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] =\n                bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      }\n      // Compute the head context for the next patch.\n      precontext = this.diff_text2(patch.diffs);\n      precontext =\n          precontext.substring(precontext.length - this.Patch_Margin);\n      // Append the end context for this patch.\n      var postcontext = this.diff_text1(bigpatch.diffs)\n                            .substring(0, this.Patch_Margin);\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n        if (patch.diffs.length !== 0 &&\n            patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n\n\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\ndiff_match_patch.prototype.patch_toText = function(patches) {\n  var text = [];\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n  return text.join('');\n};\n\n\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.patch_fromText = function(textline) {\n  var patches = [];\n  if (!textline) {\n    return patches;\n  }\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {\n        // Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n      textPointer++;\n    }\n  }\n  return patches;\n};\n\n\n/**\n * Class representing one patch operation.\n * @constructor\n */\ndiff_match_patch.patch_obj = function() {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n  this.start1 = null;\n  /** @type {?number} */\n  this.start2 = null;\n  /** @type {number} */\n  this.length1 = 0;\n  /** @type {number} */\n  this.length2 = 0;\n};\n\n\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\ndiff_match_patch.patch_obj.prototype.toString = function() {\n  var coords1, coords2;\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = (this.start1 + 1) + ',' + this.length1;\n  }\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = (this.start2 + 1) + ',' + this.length2;\n  }\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op;\n  // Escape the body of the patch with %xx notation.\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n      case DIFF_DELETE:\n        op = '-';\n        break;\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n  return text.join('').replace(/%20/g, ' ');\n};\n\n\n// The following export code was added by @ForbesLindesay\nmodule.exports = diff_match_patch;\nmodule.exports['diff_match_patch'] = diff_match_patch;\nmodule.exports['DIFF_DELETE'] = DIFF_DELETE;\nmodule.exports['DIFF_INSERT'] = DIFF_INSERT;\nmodule.exports['DIFF_EQUAL'] = DIFF_EQUAL;","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineSimpleMode = function(name, states) {\n    CodeMirror.defineMode(name, function(config) {\n      return CodeMirror.simpleMode(config, states);\n    });\n  };\n\n  CodeMirror.simpleMode = function(config, states) {\n    ensureState(states, \"start\");\n    var states_ = {}, meta = states.meta || {}, hasIndentation = false;\n    for (var state in states) if (state != meta && states.hasOwnProperty(state)) {\n      var list = states_[state] = [], orig = states[state];\n      for (var i = 0; i < orig.length; i++) {\n        var data = orig[i];\n        list.push(new Rule(data, states));\n        if (data.indent || data.dedent) hasIndentation = true;\n      }\n    }\n    var mode = {\n      startState: function() {\n        return {state: \"start\", pending: null,\n                local: null, localState: null,\n                indent: hasIndentation ? [] : null};\n      },\n      copyState: function(state) {\n        var s = {state: state.state, pending: state.pending,\n                 local: state.local, localState: null,\n                 indent: state.indent && state.indent.slice(0)};\n        if (state.localState)\n          s.localState = CodeMirror.copyState(state.local.mode, state.localState);\n        if (state.stack)\n          s.stack = state.stack.slice(0);\n        for (var pers = state.persistentStates; pers; pers = pers.next)\n          s.persistentStates = {mode: pers.mode,\n                                spec: pers.spec,\n                                state: pers.state == state.localState ? s.localState : CodeMirror.copyState(pers.mode, pers.state),\n                                next: s.persistentStates};\n        return s;\n      },\n      token: tokenFunction(states_, config),\n      innerMode: function(state) { return state.local && {mode: state.local.mode, state: state.localState}; },\n      indent: indentFunction(states_, meta)\n    };\n    if (meta) for (var prop in meta) if (meta.hasOwnProperty(prop))\n      mode[prop] = meta[prop];\n    return mode;\n  };\n\n  function ensureState(states, name) {\n    if (!states.hasOwnProperty(name))\n      throw new Error(\"Undefined state \" + name + \" in simple mode\");\n  }\n\n  function toRegex(val, caret) {\n    if (!val) return /(?:)/;\n    var flags = \"\";\n    if (val instanceof RegExp) {\n      if (val.ignoreCase) flags = \"i\";\n      if (val.unicode) flags += \"u\"\n      val = val.source;\n    } else {\n      val = String(val);\n    }\n    return new RegExp((caret === false ? \"\" : \"^\") + \"(?:\" + val + \")\", flags);\n  }\n\n  function asToken(val) {\n    if (!val) return null;\n    if (val.apply) return val\n    if (typeof val == \"string\") return val.replace(/\\./g, \" \");\n    var result = [];\n    for (var i = 0; i < val.length; i++)\n      result.push(val[i] && val[i].replace(/\\./g, \" \"));\n    return result;\n  }\n\n  function Rule(data, states) {\n    if (data.next || data.push) ensureState(states, data.next || data.push);\n    this.regex = toRegex(data.regex);\n    this.token = asToken(data.token);\n    this.data = data;\n  }\n\n  function tokenFunction(states, config) {\n    return function(stream, state) {\n      if (state.pending) {\n        var pend = state.pending.shift();\n        if (state.pending.length == 0) state.pending = null;\n        stream.pos += pend.text.length;\n        return pend.token;\n      }\n\n      if (state.local) {\n        if (state.local.end && stream.match(state.local.end)) {\n          var tok = state.local.endToken || null;\n          state.local = state.localState = null;\n          return tok;\n        } else {\n          var tok = state.local.mode.token(stream, state.localState), m;\n          if (state.local.endScan && (m = state.local.endScan.exec(stream.current())))\n            stream.pos = stream.start + m.index;\n          return tok;\n        }\n      }\n\n      var curState = states[state.state];\n      for (var i = 0; i < curState.length; i++) {\n        var rule = curState[i];\n        var matches = (!rule.data.sol || stream.sol()) && stream.match(rule.regex);\n        if (matches) {\n          if (rule.data.next) {\n            state.state = rule.data.next;\n          } else if (rule.data.push) {\n            (state.stack || (state.stack = [])).push(state.state);\n            state.state = rule.data.push;\n          } else if (rule.data.pop && state.stack && state.stack.length) {\n            state.state = state.stack.pop();\n          }\n\n          if (rule.data.mode)\n            enterLocalMode(config, state, rule.data.mode, rule.token);\n          if (rule.data.indent)\n            state.indent.push(stream.indentation() + config.indentUnit);\n          if (rule.data.dedent)\n            state.indent.pop();\n          var token = rule.token\n          if (token && token.apply) token = token(matches)\n          if (matches.length > 2 && rule.token && typeof rule.token != \"string\") {\n            for (var j = 2; j < matches.length; j++)\n              if (matches[j])\n                (state.pending || (state.pending = [])).push({text: matches[j], token: rule.token[j - 1]});\n            stream.backUp(matches[0].length - (matches[1] ? matches[1].length : 0));\n            return token[0];\n          } else if (token && token.join) {\n            return token[0];\n          } else {\n            return token;\n          }\n        }\n      }\n      stream.next();\n      return null;\n    };\n  }\n\n  function cmp(a, b) {\n    if (a === b) return true;\n    if (!a || typeof a != \"object\" || !b || typeof b != \"object\") return false;\n    var props = 0;\n    for (var prop in a) if (a.hasOwnProperty(prop)) {\n      if (!b.hasOwnProperty(prop) || !cmp(a[prop], b[prop])) return false;\n      props++;\n    }\n    for (var prop in b) if (b.hasOwnProperty(prop)) props--;\n    return props == 0;\n  }\n\n  function enterLocalMode(config, state, spec, token) {\n    var pers;\n    if (spec.persistent) for (var p = state.persistentStates; p && !pers; p = p.next)\n      if (spec.spec ? cmp(spec.spec, p.spec) : spec.mode == p.mode) pers = p;\n    var mode = pers ? pers.mode : spec.mode || CodeMirror.getMode(config, spec.spec);\n    var lState = pers ? pers.state : CodeMirror.startState(mode);\n    if (spec.persistent && !pers)\n      state.persistentStates = {mode: mode, spec: spec.spec, state: lState, next: state.persistentStates};\n\n    state.localState = lState;\n    state.local = {mode: mode,\n                   end: spec.end && toRegex(spec.end),\n                   endScan: spec.end && spec.forceEnd !== false && toRegex(spec.end, false),\n                   endToken: token && token.join ? token[token.length - 1] : token};\n  }\n\n  function indexOf(val, arr) {\n    for (var i = 0; i < arr.length; i++) if (arr[i] === val) return true;\n  }\n\n  function indentFunction(states, meta) {\n    return function(state, textAfter, line) {\n      if (state.local && state.local.mode.indent)\n        return state.local.mode.indent(state.localState, textAfter, line);\n      if (state.indent == null || state.local || meta.dontIndentStates && indexOf(state.state, meta.dontIndentStates) > -1)\n        return CodeMirror.Pass;\n\n      var pos = state.indent.length - 1, rules = states[state.state];\n      scan: for (;;) {\n        for (var i = 0; i < rules.length; i++) {\n          var rule = rules[i];\n          if (rule.data.dedent && rule.data.dedentIfLineStart !== false) {\n            var m = rule.regex.exec(textAfter);\n            if (m && m[0]) {\n              pos--;\n              if (rule.next || rule.push) rules = states[rule.next || rule.push];\n              textAfter = textAfter.slice(m[0].length);\n              continue scan;\n            }\n          }\n        }\n        break;\n      }\n      return pos < 0 ? 0 : state.indent[pos];\n    };\n  }\n});\n","import axios from 'axios'\n// import store from '@/store'\n// import storage from 'store'\nimport notification from 'ant-design-vue/es/notification'\n// import { VueAxios } from './axios'\n// import { token } from '@/store/mutation-types'\nimport { useRouter } from 'vue-router';\n\nlet allURL;\nif (process.env.VUE_APP_FLAG == \"dev\") {\n  allURL = process.env.VUE_APP_BASEURL;\n} else{\n  allURL = \"https://www.zaojingyoutu.top:8000/api/\";\n}\n\n\n//  axios \nconst request = axios.create({\n  // API \n  baseURL: allURL,\n  timeout: 300000 // \n})\nrequest.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8';//\n// \nconst errorHandler = (error) => {\n  if (error.response) {\n    const data = error.response.data\n    //  localstorage  token\n    const token = localStorage.getItem(\"token\")\n    if (error.response.status === 403) {\n      notification.error({\n        message: 'Forbidden',\n        description: data.message\n      })\n      window.location.href=\"#/login\";\n      // const router = useRouter();\n      // router.push(\"/login\")\n\n    }\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\n      notification.error({\n        message: 'Unauthorized',\n        description: 'Authorization verification failed'\n\n      })\n      if (token) {\n        // store.dispatch('Logout').then(() => {\n        //   setTimeout(() => {\n        //     window.location.reload()\n        //   }, 1500)\n        window.location.reload()\n        // })\n      }\n      // window.location.href=\"/login\";\n      const router = useRouter();\n      router.push(\"/login\")\n    }\n\n  }\n  return Promise.reject(error)\n}\n\n// request interceptor\nrequest.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\")\n  //  token \n  //  token \n  if (token) {\n    config.headers['Authorization'] = token\n  }\n  return config\n}, errorHandler)\n\n// response interceptor\nrequest.interceptors.response.use((response) => {\n  if(typeof response.data != 'string'){\n    response.data['status'] = response.status\n}\n  return response.data\n}, errorHandler)\n\n// const installer = {\n//   vm: {},\n//   install (Vue) {\n//     Vue.use(VueAxios, request)\n//   }\n// }\n\nexport default request\n\n// export {\n//   // installer as VueAxios,\n//   request as axios\n// }\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// declare global: diff_match_patch, DIFF_INSERT, DIFF_DELETE, DIFF_EQUAL\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\")); // Note non-packaged dependency diff_match_patch\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"diff_match_patch\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n  var Pos = CodeMirror.Pos;\n  var svgNS = \"http://www.w3.org/2000/svg\";\n\n  function DiffView(mv, type) {\n    this.mv = mv;\n    this.type = type;\n    this.classes = type == \"left\"\n      ? {chunk: \"CodeMirror-merge-l-chunk\",\n         start: \"CodeMirror-merge-l-chunk-start\",\n         end: \"CodeMirror-merge-l-chunk-end\",\n         insert: \"CodeMirror-merge-l-inserted\",\n         del: \"CodeMirror-merge-l-deleted\",\n         connect: \"CodeMirror-merge-l-connect\"}\n      : {chunk: \"CodeMirror-merge-r-chunk\",\n         start: \"CodeMirror-merge-r-chunk-start\",\n         end: \"CodeMirror-merge-r-chunk-end\",\n         insert: \"CodeMirror-merge-r-inserted\",\n         del: \"CodeMirror-merge-r-deleted\",\n         connect: \"CodeMirror-merge-r-connect\"};\n  }\n\n  DiffView.prototype = {\n    constructor: DiffView,\n    init: function(pane, orig, options) {\n      this.edit = this.mv.edit;\n      ;(this.edit.state.diffViews || (this.edit.state.diffViews = [])).push(this);\n      this.orig = CodeMirror(pane, copyObj({value: orig, readOnly: !this.mv.options.allowEditingOriginals}, copyObj(options)));\n      if (this.mv.options.connect == \"align\") {\n        if (!this.edit.state.trackAlignable) this.edit.state.trackAlignable = new TrackAlignable(this.edit)\n        this.orig.state.trackAlignable = new TrackAlignable(this.orig)\n      }\n      this.lockButton.title = this.edit.phrase(\"Toggle locked scrolling\");\n\n      this.orig.state.diffViews = [this];\n      var classLocation = options.chunkClassLocation || \"background\";\n      if (Object.prototype.toString.call(classLocation) != \"[object Array]\") classLocation = [classLocation]\n      this.classes.classLocation = classLocation\n\n      this.diff = getDiff(asString(orig), asString(options.value), this.mv.options.ignoreWhitespace);\n      this.chunks = getChunks(this.diff);\n      this.diffOutOfDate = this.dealigned = false;\n      this.needsScrollSync = null\n\n      this.showDifferences = options.showDifferences !== false;\n    },\n    registerEvents: function(otherDv) {\n      this.forceUpdate = registerUpdate(this);\n      setScrollLock(this, true, false);\n      registerScroll(this, otherDv);\n    },\n    setShowDifferences: function(val) {\n      val = val !== false;\n      if (val != this.showDifferences) {\n        this.showDifferences = val;\n        this.forceUpdate(\"full\");\n      }\n    }\n  };\n\n  function ensureDiff(dv) {\n    if (dv.diffOutOfDate) {\n      dv.diff = getDiff(dv.orig.getValue(), dv.edit.getValue(), dv.mv.options.ignoreWhitespace);\n      dv.chunks = getChunks(dv.diff);\n      dv.diffOutOfDate = false;\n      CodeMirror.signal(dv.edit, \"updateDiff\", dv.diff);\n    }\n  }\n\n  var updating = false;\n  function registerUpdate(dv) {\n    var edit = {from: 0, to: 0, marked: []};\n    var orig = {from: 0, to: 0, marked: []};\n    var debounceChange, updatingFast = false;\n    function update(mode) {\n      updating = true;\n      updatingFast = false;\n      if (mode == \"full\") {\n        if (dv.svg) clear(dv.svg);\n        if (dv.copyButtons) clear(dv.copyButtons);\n        clearMarks(dv.edit, edit.marked, dv.classes);\n        clearMarks(dv.orig, orig.marked, dv.classes);\n        edit.from = edit.to = orig.from = orig.to = 0;\n      }\n      ensureDiff(dv);\n      if (dv.showDifferences) {\n        updateMarks(dv.edit, dv.diff, edit, DIFF_INSERT, dv.classes);\n        updateMarks(dv.orig, dv.diff, orig, DIFF_DELETE, dv.classes);\n      }\n\n      if (dv.mv.options.connect == \"align\")\n        alignChunks(dv);\n      makeConnections(dv);\n      if (dv.needsScrollSync != null) syncScroll(dv, dv.needsScrollSync)\n\n      updating = false;\n    }\n    function setDealign(fast) {\n      if (updating) return;\n      dv.dealigned = true;\n      set(fast);\n    }\n    function set(fast) {\n      if (updating || updatingFast) return;\n      clearTimeout(debounceChange);\n      if (fast === true) updatingFast = true;\n      debounceChange = setTimeout(update, fast === true ? 20 : 250);\n    }\n    function change(_cm, change) {\n      if (!dv.diffOutOfDate) {\n        dv.diffOutOfDate = true;\n        edit.from = edit.to = orig.from = orig.to = 0;\n      }\n      // Update faster when a line was added/removed\n      setDealign(change.text.length - 1 != change.to.line - change.from.line);\n    }\n    function swapDoc() {\n      dv.diffOutOfDate = true;\n      dv.dealigned = true;\n      update(\"full\");\n    }\n    dv.edit.on(\"change\", change);\n    dv.orig.on(\"change\", change);\n    dv.edit.on(\"swapDoc\", swapDoc);\n    dv.orig.on(\"swapDoc\", swapDoc);\n    if (dv.mv.options.connect == \"align\") {\n      CodeMirror.on(dv.edit.state.trackAlignable, \"realign\", setDealign)\n      CodeMirror.on(dv.orig.state.trackAlignable, \"realign\", setDealign)\n    }\n    dv.edit.on(\"viewportChange\", function() { set(false); });\n    dv.orig.on(\"viewportChange\", function() { set(false); });\n    update();\n    return update;\n  }\n\n  function registerScroll(dv, otherDv) {\n    dv.edit.on(\"scroll\", function() {\n      syncScroll(dv, true) && makeConnections(dv);\n    });\n    dv.orig.on(\"scroll\", function() {\n      syncScroll(dv, false) && makeConnections(dv);\n      if (otherDv) syncScroll(otherDv, true) && makeConnections(otherDv);\n    });\n  }\n\n  function syncScroll(dv, toOrig) {\n    // Change handler will do a refresh after a timeout when diff is out of date\n    if (dv.diffOutOfDate) {\n      if (dv.lockScroll && dv.needsScrollSync == null) dv.needsScrollSync = toOrig\n      return false\n    }\n    dv.needsScrollSync = null\n    if (!dv.lockScroll) return true;\n    var editor, other, now = +new Date;\n    if (toOrig) { editor = dv.edit; other = dv.orig; }\n    else { editor = dv.orig; other = dv.edit; }\n    // Don't take action if the position of this editor was recently set\n    // (to prevent feedback loops)\n    if (editor.state.scrollSetBy == dv && (editor.state.scrollSetAt || 0) + 250 > now) return false;\n\n    var sInfo = editor.getScrollInfo();\n    if (dv.mv.options.connect == \"align\") {\n      targetPos = sInfo.top;\n    } else {\n      var halfScreen = .5 * sInfo.clientHeight, midY = sInfo.top + halfScreen;\n      var mid = editor.lineAtHeight(midY, \"local\");\n      var around = chunkBoundariesAround(dv.chunks, mid, toOrig);\n      var off = getOffsets(editor, toOrig ? around.edit : around.orig);\n      var offOther = getOffsets(other, toOrig ? around.orig : around.edit);\n      var ratio = (midY - off.top) / (off.bot - off.top);\n      var targetPos = (offOther.top - halfScreen) + ratio * (offOther.bot - offOther.top);\n\n      var botDist, mix;\n      // Some careful tweaking to make sure no space is left out of view\n      // when scrolling to top or bottom.\n      if (targetPos > sInfo.top && (mix = sInfo.top / halfScreen) < 1) {\n        targetPos = targetPos * mix + sInfo.top * (1 - mix);\n      } else if ((botDist = sInfo.height - sInfo.clientHeight - sInfo.top) < halfScreen) {\n        var otherInfo = other.getScrollInfo();\n        var botDistOther = otherInfo.height - otherInfo.clientHeight - targetPos;\n        if (botDistOther > botDist && (mix = botDist / halfScreen) < 1)\n          targetPos = targetPos * mix + (otherInfo.height - otherInfo.clientHeight - botDist) * (1 - mix);\n      }\n    }\n\n    other.scrollTo(sInfo.left, targetPos);\n    other.state.scrollSetAt = now;\n    other.state.scrollSetBy = dv;\n    return true;\n  }\n\n  function getOffsets(editor, around) {\n    var bot = around.after;\n    if (bot == null) bot = editor.lastLine() + 1;\n    return {top: editor.heightAtLine(around.before || 0, \"local\"),\n            bot: editor.heightAtLine(bot, \"local\")};\n  }\n\n  function setScrollLock(dv, val, action) {\n    dv.lockScroll = val;\n    if (val && action != false) syncScroll(dv, DIFF_INSERT) && makeConnections(dv);\n    (val ? CodeMirror.addClass : CodeMirror.rmClass)(dv.lockButton, \"CodeMirror-merge-scrolllock-enabled\");\n  }\n\n  // Updating the marks for editor content\n\n  function removeClass(editor, line, classes) {\n    var locs = classes.classLocation\n    for (var i = 0; i < locs.length; i++) {\n      editor.removeLineClass(line, locs[i], classes.chunk);\n      editor.removeLineClass(line, locs[i], classes.start);\n      editor.removeLineClass(line, locs[i], classes.end);\n    }\n  }\n\n  function clearMarks(editor, arr, classes) {\n    for (var i = 0; i < arr.length; ++i) {\n      var mark = arr[i];\n      if (mark instanceof CodeMirror.TextMarker)\n        mark.clear();\n      else if (mark.parent)\n        removeClass(editor, mark, classes);\n    }\n    arr.length = 0;\n  }\n\n  // FIXME maybe add a margin around viewport to prevent too many updates\n  function updateMarks(editor, diff, state, type, classes) {\n    var vp = editor.getViewport();\n    editor.operation(function() {\n      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {\n        clearMarks(editor, state.marked, classes);\n        markChanges(editor, diff, type, state.marked, vp.from, vp.to, classes);\n        state.from = vp.from; state.to = vp.to;\n      } else {\n        if (vp.from < state.from) {\n          markChanges(editor, diff, type, state.marked, vp.from, state.from, classes);\n          state.from = vp.from;\n        }\n        if (vp.to > state.to) {\n          markChanges(editor, diff, type, state.marked, state.to, vp.to, classes);\n          state.to = vp.to;\n        }\n      }\n    });\n  }\n\n  function addClass(editor, lineNr, classes, main, start, end) {\n    var locs = classes.classLocation, line = editor.getLineHandle(lineNr);\n    for (var i = 0; i < locs.length; i++) {\n      if (main) editor.addLineClass(line, locs[i], classes.chunk);\n      if (start) editor.addLineClass(line, locs[i], classes.start);\n      if (end) editor.addLineClass(line, locs[i], classes.end);\n    }\n    return line;\n  }\n\n  function markChanges(editor, diff, type, marks, from, to, classes) {\n    var pos = Pos(0, 0);\n    var top = Pos(from, 0), bot = editor.clipPos(Pos(to - 1));\n    var cls = type == DIFF_DELETE ? classes.del : classes.insert;\n    function markChunk(start, end) {\n      var bfrom = Math.max(from, start), bto = Math.min(to, end);\n      for (var i = bfrom; i < bto; ++i)\n        marks.push(addClass(editor, i, classes, true, i == start, i == end - 1));\n      // When the chunk is empty, make sure a horizontal line shows up\n      if (start == end && bfrom == end && bto == end) {\n        if (bfrom)\n          marks.push(addClass(editor, bfrom - 1, classes, false, false, true));\n        else\n          marks.push(addClass(editor, bfrom, classes, false, true, false));\n      }\n    }\n\n    var chunkStart = 0, pending = false;\n    for (var i = 0; i < diff.length; ++i) {\n      var part = diff[i], tp = part[0], str = part[1];\n      if (tp == DIFF_EQUAL) {\n        var cleanFrom = pos.line + (startOfLineClean(diff, i) ? 0 : 1);\n        moveOver(pos, str);\n        var cleanTo = pos.line + (endOfLineClean(diff, i) ? 1 : 0);\n        if (cleanTo > cleanFrom) {\n          if (pending) { markChunk(chunkStart, cleanFrom); pending = false }\n          chunkStart = cleanTo;\n        }\n      } else {\n        pending = true\n        if (tp == type) {\n          var end = moveOver(pos, str, true);\n          var a = posMax(top, pos), b = posMin(bot, end);\n          if (!posEq(a, b))\n            marks.push(editor.markText(a, b, {className: cls}));\n          pos = end;\n        }\n      }\n    }\n    if (pending) markChunk(chunkStart, pos.line + 1);\n  }\n\n  // Updating the gap between editor and original\n\n  function makeConnections(dv) {\n    if (!dv.showDifferences) return;\n\n    if (dv.svg) {\n      clear(dv.svg);\n      var w = dv.gap.offsetWidth;\n      attrs(dv.svg, \"width\", w, \"height\", dv.gap.offsetHeight);\n    }\n    if (dv.copyButtons) clear(dv.copyButtons);\n\n    var vpEdit = dv.edit.getViewport(), vpOrig = dv.orig.getViewport();\n    var outerTop = dv.mv.wrap.getBoundingClientRect().top\n    var sTopEdit = outerTop - dv.edit.getScrollerElement().getBoundingClientRect().top + dv.edit.getScrollInfo().top\n    var sTopOrig = outerTop - dv.orig.getScrollerElement().getBoundingClientRect().top + dv.orig.getScrollInfo().top;\n    for (var i = 0; i < dv.chunks.length; i++) {\n      var ch = dv.chunks[i];\n      if (ch.editFrom <= vpEdit.to && ch.editTo >= vpEdit.from &&\n          ch.origFrom <= vpOrig.to && ch.origTo >= vpOrig.from)\n        drawConnectorsForChunk(dv, ch, sTopOrig, sTopEdit, w);\n    }\n  }\n\n  function getMatchingOrigLine(editLine, chunks) {\n    var editStart = 0, origStart = 0;\n    for (var i = 0; i < chunks.length; i++) {\n      var chunk = chunks[i];\n      if (chunk.editTo > editLine && chunk.editFrom <= editLine) return null;\n      if (chunk.editFrom > editLine) break;\n      editStart = chunk.editTo;\n      origStart = chunk.origTo;\n    }\n    return origStart + (editLine - editStart);\n  }\n\n  // Combines information about chunks and widgets/markers to return\n  // an array of lines, in a single editor, that probably need to be\n  // aligned with their counterparts in the editor next to it.\n  function alignableFor(cm, chunks, isOrig) {\n    var tracker = cm.state.trackAlignable\n    var start = cm.firstLine(), trackI = 0\n    var result = []\n    for (var i = 0;; i++) {\n      var chunk = chunks[i]\n      var chunkStart = !chunk ? 1e9 : isOrig ? chunk.origFrom : chunk.editFrom\n      for (; trackI < tracker.alignable.length; trackI += 2) {\n        var n = tracker.alignable[trackI] + 1\n        if (n <= start) continue\n        if (n <= chunkStart) result.push(n)\n        else break\n      }\n      if (!chunk) break\n      result.push(start = isOrig ? chunk.origTo : chunk.editTo)\n    }\n    return result\n  }\n\n  // Given information about alignable lines in two editors, fill in\n  // the result (an array of three-element arrays) to reflect the\n  // lines that need to be aligned with each other.\n  function mergeAlignable(result, origAlignable, chunks, setIndex) {\n    var rI = 0, origI = 0, chunkI = 0, diff = 0\n    outer: for (;; rI++) {\n      var nextR = result[rI], nextO = origAlignable[origI]\n      if (!nextR && nextO == null) break\n\n      var rLine = nextR ? nextR[0] : 1e9, oLine = nextO == null ? 1e9 : nextO\n      while (chunkI < chunks.length) {\n        var chunk = chunks[chunkI]\n        if (chunk.origFrom <= oLine && chunk.origTo > oLine) {\n          origI++\n          rI--\n          continue outer;\n        }\n        if (chunk.editTo > rLine) {\n          if (chunk.editFrom <= rLine) continue outer;\n          break\n        }\n        diff += (chunk.origTo - chunk.origFrom) - (chunk.editTo - chunk.editFrom)\n        chunkI++\n      }\n      if (rLine == oLine - diff) {\n        nextR[setIndex] = oLine\n        origI++\n      } else if (rLine < oLine - diff) {\n        nextR[setIndex] = rLine + diff\n      } else {\n        var record = [oLine - diff, null, null]\n        record[setIndex] = oLine\n        result.splice(rI, 0, record)\n        origI++\n      }\n    }\n  }\n\n  function findAlignedLines(dv, other) {\n    var alignable = alignableFor(dv.edit, dv.chunks, false), result = []\n    if (other) for (var i = 0, j = 0; i < other.chunks.length; i++) {\n      var n = other.chunks[i].editTo\n      while (j < alignable.length && alignable[j] < n) j++\n      if (j == alignable.length || alignable[j] != n) alignable.splice(j++, 0, n)\n    }\n    for (var i = 0; i < alignable.length; i++)\n      result.push([alignable[i], null, null])\n\n    mergeAlignable(result, alignableFor(dv.orig, dv.chunks, true), dv.chunks, 1)\n    if (other)\n      mergeAlignable(result, alignableFor(other.orig, other.chunks, true), other.chunks, 2)\n\n    return result\n  }\n\n  function alignChunks(dv, force) {\n    if (!dv.dealigned && !force) return;\n    if (!dv.orig.curOp) return dv.orig.operation(function() {\n      alignChunks(dv, force);\n    });\n\n    dv.dealigned = false;\n    var other = dv.mv.left == dv ? dv.mv.right : dv.mv.left;\n    if (other) {\n      ensureDiff(other);\n      other.dealigned = false;\n    }\n    var linesToAlign = findAlignedLines(dv, other);\n\n    // Clear old aligners\n    var aligners = dv.mv.aligners;\n    for (var i = 0; i < aligners.length; i++)\n      aligners[i].clear();\n    aligners.length = 0;\n\n    var cm = [dv.edit, dv.orig], scroll = [], offset = []\n    if (other) cm.push(other.orig);\n    for (var i = 0; i < cm.length; i++) {\n      scroll.push(cm[i].getScrollInfo().top);\n      offset.push(-cm[i].getScrollerElement().getBoundingClientRect().top)\n    }\n\n    if (offset[0] != offset[1] || cm.length == 3 && offset[1] != offset[2])\n      alignLines(cm, offset, [0, 0, 0], aligners)\n    for (var ln = 0; ln < linesToAlign.length; ln++)\n      alignLines(cm, offset, linesToAlign[ln], aligners);\n\n    for (var i = 0; i < cm.length; i++)\n      cm[i].scrollTo(null, scroll[i]);\n  }\n\n  function alignLines(cm, cmOffset, lines, aligners) {\n    var maxOffset = -1e8, offset = [];\n    for (var i = 0; i < cm.length; i++) if (lines[i] != null) {\n      var off = cm[i].heightAtLine(lines[i], \"local\") - cmOffset[i];\n      offset[i] = off;\n      maxOffset = Math.max(maxOffset, off);\n    }\n    for (var i = 0; i < cm.length; i++) if (lines[i] != null) {\n      var diff = maxOffset - offset[i];\n      if (diff > 1)\n        aligners.push(padAbove(cm[i], lines[i], diff));\n    }\n  }\n\n  function padAbove(cm, line, size) {\n    var above = true;\n    if (line > cm.lastLine()) {\n      line--;\n      above = false;\n    }\n    var elt = document.createElement(\"div\");\n    elt.className = \"CodeMirror-merge-spacer\";\n    elt.style.height = size + \"px\"; elt.style.minWidth = \"1px\";\n    return cm.addLineWidget(line, elt, {height: size, above: above, mergeSpacer: true, handleMouseEvents: true});\n  }\n\n  function drawConnectorsForChunk(dv, chunk, sTopOrig, sTopEdit, w) {\n    var flip = dv.type == \"left\";\n    var top = dv.orig.heightAtLine(chunk.origFrom, \"local\", true) - sTopOrig;\n    if (dv.svg) {\n      var topLpx = top;\n      var topRpx = dv.edit.heightAtLine(chunk.editFrom, \"local\", true) - sTopEdit;\n      if (flip) { var tmp = topLpx; topLpx = topRpx; topRpx = tmp; }\n      var botLpx = dv.orig.heightAtLine(chunk.origTo, \"local\", true) - sTopOrig;\n      var botRpx = dv.edit.heightAtLine(chunk.editTo, \"local\", true) - sTopEdit;\n      if (flip) { var tmp = botLpx; botLpx = botRpx; botRpx = tmp; }\n      var curveTop = \" C \" + w/2 + \" \" + topRpx + \" \" + w/2 + \" \" + topLpx + \" \" + (w + 2) + \" \" + topLpx;\n      var curveBot = \" C \" + w/2 + \" \" + botLpx + \" \" + w/2 + \" \" + botRpx + \" -1 \" + botRpx;\n      attrs(dv.svg.appendChild(document.createElementNS(svgNS, \"path\")),\n            \"d\", \"M -1 \" + topRpx + curveTop + \" L \" + (w + 2) + \" \" + botLpx + curveBot + \" z\",\n            \"class\", dv.classes.connect);\n    }\n    if (dv.copyButtons) {\n      var copy = dv.copyButtons.appendChild(elt(\"div\", dv.type == \"left\" ? \"\\u21dd\" : \"\\u21dc\",\n                                                \"CodeMirror-merge-copy\"));\n      var editOriginals = dv.mv.options.allowEditingOriginals;\n      copy.title = dv.edit.phrase(editOriginals ? \"Push to left\" : \"Revert chunk\");\n      copy.chunk = chunk;\n      copy.style.top = (chunk.origTo > chunk.origFrom ? top : dv.edit.heightAtLine(chunk.editFrom, \"local\") - sTopEdit) + \"px\";\n      copy.setAttribute(\"role\", \"button\");\n\n      if (editOriginals) {\n        var topReverse = dv.edit.heightAtLine(chunk.editFrom, \"local\") - sTopEdit;\n        var copyReverse = dv.copyButtons.appendChild(elt(\"div\", dv.type == \"right\" ? \"\\u21dd\" : \"\\u21dc\",\n                                                         \"CodeMirror-merge-copy-reverse\"));\n        copyReverse.title = \"Push to right\";\n        copyReverse.chunk = {editFrom: chunk.origFrom, editTo: chunk.origTo,\n                             origFrom: chunk.editFrom, origTo: chunk.editTo};\n        copyReverse.style.top = topReverse + \"px\";\n        dv.type == \"right\" ? copyReverse.style.left = \"2px\" : copyReverse.style.right = \"2px\";\n        copyReverse.setAttribute(\"role\", \"button\");\n      }\n    }\n  }\n\n  function copyChunk(dv, to, from, chunk) {\n    if (dv.diffOutOfDate) return;\n    var origStart = chunk.origTo > from.lastLine() ? Pos(chunk.origFrom - 1) : Pos(chunk.origFrom, 0)\n    var origEnd = Pos(chunk.origTo, 0)\n    var editStart = chunk.editTo > to.lastLine() ? Pos(chunk.editFrom - 1) : Pos(chunk.editFrom, 0)\n    var editEnd = Pos(chunk.editTo, 0)\n    var handler = dv.mv.options.revertChunk\n    if (handler)\n      handler(dv.mv, from, origStart, origEnd, to, editStart, editEnd)\n    else\n      to.replaceRange(from.getRange(origStart, origEnd), editStart, editEnd)\n  }\n\n  // Merge view, containing 0, 1, or 2 diff views.\n\n  var MergeView = CodeMirror.MergeView = function(node, options) {\n    if (!(this instanceof MergeView)) return new MergeView(node, options);\n\n    this.options = options;\n    var origLeft = options.origLeft, origRight = options.origRight == null ? options.orig : options.origRight;\n\n    var hasLeft = origLeft != null, hasRight = origRight != null;\n    var panes = 1 + (hasLeft ? 1 : 0) + (hasRight ? 1 : 0);\n    var wrap = [], left = this.left = null, right = this.right = null;\n    var self = this;\n\n    if (hasLeft) {\n      left = this.left = new DiffView(this, \"left\");\n      var leftPane = elt(\"div\", null, \"CodeMirror-merge-pane CodeMirror-merge-left\");\n      wrap.push(leftPane);\n      wrap.push(buildGap(left));\n    }\n\n    var editPane = elt(\"div\", null, \"CodeMirror-merge-pane CodeMirror-merge-editor\");\n    wrap.push(editPane);\n\n    if (hasRight) {\n      right = this.right = new DiffView(this, \"right\");\n      wrap.push(buildGap(right));\n      var rightPane = elt(\"div\", null, \"CodeMirror-merge-pane CodeMirror-merge-right\");\n      wrap.push(rightPane);\n    }\n\n    (hasRight ? rightPane : editPane).className += \" CodeMirror-merge-pane-rightmost\";\n\n    wrap.push(elt(\"div\", null, null, \"height: 0; clear: both;\"));\n\n    var wrapElt = this.wrap = node.appendChild(elt(\"div\", wrap, \"CodeMirror-merge CodeMirror-merge-\" + panes + \"pane\"));\n    this.edit = CodeMirror(editPane, copyObj(options));\n\n    if (left) left.init(leftPane, origLeft, options);\n    if (right) right.init(rightPane, origRight, options);\n    if (options.collapseIdentical)\n      this.editor().operation(function() {\n        collapseIdenticalStretches(self, options.collapseIdentical);\n      });\n    if (options.connect == \"align\") {\n      this.aligners = [];\n      alignChunks(this.left || this.right, true);\n    }\n    if (left) left.registerEvents(right)\n    if (right) right.registerEvents(left)\n\n\n    var onResize = function() {\n      if (left) makeConnections(left);\n      if (right) makeConnections(right);\n    };\n    CodeMirror.on(window, \"resize\", onResize);\n    var resizeInterval = setInterval(function() {\n      for (var p = wrapElt.parentNode; p && p != document.body; p = p.parentNode) {}\n      if (!p) { clearInterval(resizeInterval); CodeMirror.off(window, \"resize\", onResize); }\n    }, 5000);\n  };\n\n  function buildGap(dv) {\n    var lock = dv.lockButton = elt(\"div\", null, \"CodeMirror-merge-scrolllock\");\n    lock.setAttribute(\"role\", \"button\");\n    var lockWrap = elt(\"div\", [lock], \"CodeMirror-merge-scrolllock-wrap\");\n    CodeMirror.on(lock, \"click\", function() { setScrollLock(dv, !dv.lockScroll); });\n    var gapElts = [lockWrap];\n    if (dv.mv.options.revertButtons !== false) {\n      dv.copyButtons = elt(\"div\", null, \"CodeMirror-merge-copybuttons-\" + dv.type);\n      CodeMirror.on(dv.copyButtons, \"click\", function(e) {\n        var node = e.target || e.srcElement;\n        if (!node.chunk) return;\n        if (node.className == \"CodeMirror-merge-copy-reverse\") {\n          copyChunk(dv, dv.orig, dv.edit, node.chunk);\n          return;\n        }\n        copyChunk(dv, dv.edit, dv.orig, node.chunk);\n      });\n      gapElts.unshift(dv.copyButtons);\n    }\n    if (dv.mv.options.connect != \"align\") {\n      var svg = document.createElementNS && document.createElementNS(svgNS, \"svg\");\n      if (svg && !svg.createSVGRect) svg = null;\n      dv.svg = svg;\n      if (svg) gapElts.push(svg);\n    }\n\n    return dv.gap = elt(\"div\", gapElts, \"CodeMirror-merge-gap\");\n  }\n\n  MergeView.prototype = {\n    constructor: MergeView,\n    editor: function() { return this.edit; },\n    rightOriginal: function() { return this.right && this.right.orig; },\n    leftOriginal: function() { return this.left && this.left.orig; },\n    setShowDifferences: function(val) {\n      if (this.right) this.right.setShowDifferences(val);\n      if (this.left) this.left.setShowDifferences(val);\n    },\n    rightChunks: function() {\n      if (this.right) { ensureDiff(this.right); return this.right.chunks; }\n    },\n    leftChunks: function() {\n      if (this.left) { ensureDiff(this.left); return this.left.chunks; }\n    }\n  };\n\n  function asString(obj) {\n    if (typeof obj == \"string\") return obj;\n    else return obj.getValue();\n  }\n\n  // Operations on diffs\n  var dmp;\n  function getDiff(a, b, ignoreWhitespace) {\n    if (!dmp) dmp = new diff_match_patch();\n\n    var diff = dmp.diff_main(a, b);\n    // The library sometimes leaves in empty parts, which confuse the algorithm\n    for (var i = 0; i < diff.length; ++i) {\n      var part = diff[i];\n      if (ignoreWhitespace ? !/[^ \\t]/.test(part[1]) : !part[1]) {\n        diff.splice(i--, 1);\n      } else if (i && diff[i - 1][0] == part[0]) {\n        diff.splice(i--, 1);\n        diff[i][1] += part[1];\n      }\n    }\n    return diff;\n  }\n\n  function getChunks(diff) {\n    var chunks = [];\n    if (!diff.length) return chunks;\n    var startEdit = 0, startOrig = 0;\n    var edit = Pos(0, 0), orig = Pos(0, 0);\n    for (var i = 0; i < diff.length; ++i) {\n      var part = diff[i], tp = part[0];\n      if (tp == DIFF_EQUAL) {\n        var startOff = !startOfLineClean(diff, i) || edit.line < startEdit || orig.line < startOrig ? 1 : 0;\n        var cleanFromEdit = edit.line + startOff, cleanFromOrig = orig.line + startOff;\n        moveOver(edit, part[1], null, orig);\n        var endOff = endOfLineClean(diff, i) ? 1 : 0;\n        var cleanToEdit = edit.line + endOff, cleanToOrig = orig.line + endOff;\n        if (cleanToEdit > cleanFromEdit) {\n          if (i) chunks.push({origFrom: startOrig, origTo: cleanFromOrig,\n                              editFrom: startEdit, editTo: cleanFromEdit});\n          startEdit = cleanToEdit; startOrig = cleanToOrig;\n        }\n      } else {\n        moveOver(tp == DIFF_INSERT ? edit : orig, part[1]);\n      }\n    }\n    if (startEdit <= edit.line || startOrig <= orig.line)\n      chunks.push({origFrom: startOrig, origTo: orig.line + 1,\n                   editFrom: startEdit, editTo: edit.line + 1});\n    return chunks;\n  }\n\n  function endOfLineClean(diff, i) {\n    if (i == diff.length - 1) return true;\n    var next = diff[i + 1][1];\n    if ((next.length == 1 && i < diff.length - 2) || next.charCodeAt(0) != 10) return false;\n    if (i == diff.length - 2) return true;\n    next = diff[i + 2][1];\n    return (next.length > 1 || i == diff.length - 3) && next.charCodeAt(0) == 10;\n  }\n\n  function startOfLineClean(diff, i) {\n    if (i == 0) return true;\n    var last = diff[i - 1][1];\n    if (last.charCodeAt(last.length - 1) != 10) return false;\n    if (i == 1) return true;\n    last = diff[i - 2][1];\n    return last.charCodeAt(last.length - 1) == 10;\n  }\n\n  function chunkBoundariesAround(chunks, n, nInEdit) {\n    var beforeE, afterE, beforeO, afterO;\n    for (var i = 0; i < chunks.length; i++) {\n      var chunk = chunks[i];\n      var fromLocal = nInEdit ? chunk.editFrom : chunk.origFrom;\n      var toLocal = nInEdit ? chunk.editTo : chunk.origTo;\n      if (afterE == null) {\n        if (fromLocal > n) { afterE = chunk.editFrom; afterO = chunk.origFrom; }\n        else if (toLocal > n) { afterE = chunk.editTo; afterO = chunk.origTo; }\n      }\n      if (toLocal <= n) { beforeE = chunk.editTo; beforeO = chunk.origTo; }\n      else if (fromLocal <= n) { beforeE = chunk.editFrom; beforeO = chunk.origFrom; }\n    }\n    return {edit: {before: beforeE, after: afterE}, orig: {before: beforeO, after: afterO}};\n  }\n\n  function collapseSingle(cm, from, to) {\n    cm.addLineClass(from, \"wrap\", \"CodeMirror-merge-collapsed-line\");\n    var widget = document.createElement(\"span\");\n    widget.className = \"CodeMirror-merge-collapsed-widget\";\n    widget.title = cm.phrase(\"Identical text collapsed. Click to expand.\");\n    var mark = cm.markText(Pos(from, 0), Pos(to - 1), {\n      inclusiveLeft: true,\n      inclusiveRight: true,\n      replacedWith: widget,\n      clearOnEnter: true\n    });\n    function clear() {\n      mark.clear();\n      cm.removeLineClass(from, \"wrap\", \"CodeMirror-merge-collapsed-line\");\n    }\n    if (mark.explicitlyCleared) clear();\n    CodeMirror.on(widget, \"click\", clear);\n    mark.on(\"clear\", clear);\n    CodeMirror.on(widget, \"click\", clear);\n    return {mark: mark, clear: clear};\n  }\n\n  function collapseStretch(size, editors) {\n    var marks = [];\n    function clear() {\n      for (var i = 0; i < marks.length; i++) marks[i].clear();\n    }\n    for (var i = 0; i < editors.length; i++) {\n      var editor = editors[i];\n      var mark = collapseSingle(editor.cm, editor.line, editor.line + size);\n      marks.push(mark);\n      mark.mark.on(\"clear\", clear);\n    }\n    return marks[0].mark;\n  }\n\n  function unclearNearChunks(dv, margin, off, clear) {\n    for (var i = 0; i < dv.chunks.length; i++) {\n      var chunk = dv.chunks[i];\n      for (var l = chunk.editFrom - margin; l < chunk.editTo + margin; l++) {\n        var pos = l + off;\n        if (pos >= 0 && pos < clear.length) clear[pos] = false;\n      }\n    }\n  }\n\n  function collapseIdenticalStretches(mv, margin) {\n    if (typeof margin != \"number\") margin = 2;\n    var clear = [], edit = mv.editor(), off = edit.firstLine();\n    for (var l = off, e = edit.lastLine(); l <= e; l++) clear.push(true);\n    if (mv.left) unclearNearChunks(mv.left, margin, off, clear);\n    if (mv.right) unclearNearChunks(mv.right, margin, off, clear);\n\n    for (var i = 0; i < clear.length; i++) {\n      if (clear[i]) {\n        var line = i + off;\n        for (var size = 1; i < clear.length - 1 && clear[i + 1]; i++, size++) {}\n        if (size > margin) {\n          var editors = [{line: line, cm: edit}];\n          if (mv.left) editors.push({line: getMatchingOrigLine(line, mv.left.chunks), cm: mv.left.orig});\n          if (mv.right) editors.push({line: getMatchingOrigLine(line, mv.right.chunks), cm: mv.right.orig});\n          var mark = collapseStretch(size, editors);\n          if (mv.options.onCollapse) mv.options.onCollapse(mv, line, size, mark);\n        }\n      }\n    }\n  }\n\n  // General utilities\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) e.className = className;\n    if (style) e.style.cssText = style;\n    if (typeof content == \"string\") e.appendChild(document.createTextNode(content));\n    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);\n    return e;\n  }\n\n  function clear(node) {\n    for (var count = node.childNodes.length; count > 0; --count)\n      node.removeChild(node.firstChild);\n  }\n\n  function attrs(elt) {\n    for (var i = 1; i < arguments.length; i += 2)\n      elt.setAttribute(arguments[i], arguments[i+1]);\n  }\n\n  function copyObj(obj, target) {\n    if (!target) target = {};\n    for (var prop in obj) if (obj.hasOwnProperty(prop)) target[prop] = obj[prop];\n    return target;\n  }\n\n  function moveOver(pos, str, copy, other) {\n    var out = copy ? Pos(pos.line, pos.ch) : pos, at = 0;\n    for (;;) {\n      var nl = str.indexOf(\"\\n\", at);\n      if (nl == -1) break;\n      ++out.line;\n      if (other) ++other.line;\n      at = nl + 1;\n    }\n    out.ch = (at ? 0 : out.ch) + (str.length - at);\n    if (other) other.ch = (at ? 0 : other.ch) + (str.length - at);\n    return out;\n  }\n\n  // Tracks collapsed markers and line widgets, in order to be able to\n  // accurately align the content of two editors.\n\n  var F_WIDGET = 1, F_WIDGET_BELOW = 2, F_MARKER = 4\n\n  function TrackAlignable(cm) {\n    this.cm = cm\n    this.alignable = []\n    this.height = cm.doc.height\n    var self = this\n    cm.on(\"markerAdded\", function(_, marker) {\n      if (!marker.collapsed) return\n      var found = marker.find(1)\n      if (found != null) self.set(found.line, F_MARKER)\n    })\n    cm.on(\"markerCleared\", function(_, marker, _min, max) {\n      if (max != null && marker.collapsed)\n        self.check(max, F_MARKER, self.hasMarker)\n    })\n    cm.on(\"markerChanged\", this.signal.bind(this))\n    cm.on(\"lineWidgetAdded\", function(_, widget, lineNo) {\n      if (widget.mergeSpacer) return\n      if (widget.above) self.set(lineNo - 1, F_WIDGET_BELOW)\n      else self.set(lineNo, F_WIDGET)\n    })\n    cm.on(\"lineWidgetCleared\", function(_, widget, lineNo) {\n      if (widget.mergeSpacer) return\n      if (widget.above) self.check(lineNo - 1, F_WIDGET_BELOW, self.hasWidgetBelow)\n      else self.check(lineNo, F_WIDGET, self.hasWidget)\n    })\n    cm.on(\"lineWidgetChanged\", this.signal.bind(this))\n    cm.on(\"change\", function(_, change) {\n      var start = change.from.line, nBefore = change.to.line - change.from.line\n      var nAfter = change.text.length - 1, end = start + nAfter\n      if (nBefore || nAfter) self.map(start, nBefore, nAfter)\n      self.check(end, F_MARKER, self.hasMarker)\n      if (nBefore || nAfter) self.check(change.from.line, F_MARKER, self.hasMarker)\n    })\n    cm.on(\"viewportChange\", function() {\n      if (self.cm.doc.height != self.height) self.signal()\n    })\n  }\n\n  TrackAlignable.prototype = {\n    signal: function() {\n      CodeMirror.signal(this, \"realign\")\n      this.height = this.cm.doc.height\n    },\n\n    set: function(n, flags) {\n      var pos = -1\n      for (; pos < this.alignable.length; pos += 2) {\n        var diff = this.alignable[pos] - n\n        if (diff == 0) {\n          if ((this.alignable[pos + 1] & flags) == flags) return\n          this.alignable[pos + 1] |= flags\n          this.signal()\n          return\n        }\n        if (diff > 0) break\n      }\n      this.signal()\n      this.alignable.splice(pos, 0, n, flags)\n    },\n\n    find: function(n) {\n      for (var i = 0; i < this.alignable.length; i += 2)\n        if (this.alignable[i] == n) return i\n      return -1\n    },\n\n    check: function(n, flag, pred) {\n      var found = this.find(n)\n      if (found == -1 || !(this.alignable[found + 1] & flag)) return\n      if (!pred.call(this, n)) {\n        this.signal()\n        var flags = this.alignable[found + 1] & ~flag\n        if (flags) this.alignable[found + 1] = flags\n        else this.alignable.splice(found, 2)\n      }\n    },\n\n    hasMarker: function(n) {\n      var handle = this.cm.getLineHandle(n)\n      if (handle.markedSpans) for (var i = 0; i < handle.markedSpans.length; i++)\n        if (handle.markedSpans[i].marker.collapsed && handle.markedSpans[i].to != null)\n          return true\n      return false\n    },\n\n    hasWidget: function(n) {\n      var handle = this.cm.getLineHandle(n)\n      if (handle.widgets) for (var i = 0; i < handle.widgets.length; i++)\n        if (!handle.widgets[i].above && !handle.widgets[i].mergeSpacer) return true\n      return false\n    },\n\n    hasWidgetBelow: function(n) {\n      if (n == this.cm.lastLine()) return false\n      var handle = this.cm.getLineHandle(n + 1)\n      if (handle.widgets) for (var i = 0; i < handle.widgets.length; i++)\n        if (handle.widgets[i].above && !handle.widgets[i].mergeSpacer) return true\n      return false\n    },\n\n    map: function(from, nBefore, nAfter) {\n      var diff = nAfter - nBefore, to = from + nBefore, widgetFrom = -1, widgetTo = -1\n      for (var i = 0; i < this.alignable.length; i += 2) {\n        var n = this.alignable[i]\n        if (n == from && (this.alignable[i + 1] & F_WIDGET_BELOW)) widgetFrom = i\n        if (n == to && (this.alignable[i + 1] & F_WIDGET_BELOW)) widgetTo = i\n        if (n <= from) continue\n        else if (n < to) this.alignable.splice(i--, 2)\n        else this.alignable[i] += diff\n      }\n      if (widgetFrom > -1) {\n        var flags = this.alignable[widgetFrom + 1]\n        if (flags == F_WIDGET_BELOW) this.alignable.splice(widgetFrom, 2)\n        else this.alignable[widgetFrom + 1] = flags & ~F_WIDGET_BELOW\n      }\n      if (widgetTo > -1 && nAfter)\n        this.set(from + nAfter, F_WIDGET_BELOW)\n    }\n  }\n\n  function posMin(a, b) { return (a.line - b.line || a.ch - b.ch) < 0 ? a : b; }\n  function posMax(a, b) { return (a.line - b.line || a.ch - b.ch) > 0 ? a : b; }\n  function posEq(a, b) { return a.line == b.line && a.ch == b.ch; }\n\n  function findPrevDiff(chunks, start, isOrig) {\n    for (var i = chunks.length - 1; i >= 0; i--) {\n      var chunk = chunks[i];\n      var to = (isOrig ? chunk.origTo : chunk.editTo) - 1;\n      if (to < start) return to;\n    }\n  }\n\n  function findNextDiff(chunks, start, isOrig) {\n    for (var i = 0; i < chunks.length; i++) {\n      var chunk = chunks[i];\n      var from = (isOrig ? chunk.origFrom : chunk.editFrom);\n      if (from > start) return from;\n    }\n  }\n\n  function goNearbyDiff(cm, dir) {\n    var found = null, views = cm.state.diffViews, line = cm.getCursor().line;\n    if (views) for (var i = 0; i < views.length; i++) {\n      var dv = views[i], isOrig = cm == dv.orig;\n      ensureDiff(dv);\n      var pos = dir < 0 ? findPrevDiff(dv.chunks, line, isOrig) : findNextDiff(dv.chunks, line, isOrig);\n      if (pos != null && (found == null || (dir < 0 ? pos > found : pos < found)))\n        found = pos;\n    }\n    if (found != null)\n      cm.setCursor(found, 0);\n    else\n      return CodeMirror.Pass;\n  }\n\n  CodeMirror.commands.goNextDiff = function(cm) {\n    return goNearbyDiff(cm, 1);\n  };\n  CodeMirror.commands.goPrevDiff = function(cm) {\n    return goNearbyDiff(cm, -1);\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function wordRegexp(words) {\n    return new RegExp(\"^((\" + words.join(\")|(\") + \"))\\\\b\");\n  }\n\n  var wordOperators = wordRegexp([\"and\", \"or\", \"not\", \"is\"]);\n  var commonKeywords = [\"as\", \"assert\", \"break\", \"class\", \"continue\",\n                        \"def\", \"del\", \"elif\", \"else\", \"except\", \"finally\",\n                        \"for\", \"from\", \"global\", \"if\", \"import\",\n                        \"lambda\", \"pass\", \"raise\", \"return\",\n                        \"try\", \"while\", \"with\", \"yield\", \"in\"];\n  var commonBuiltins = [\"abs\", \"all\", \"any\", \"bin\", \"bool\", \"bytearray\", \"callable\", \"chr\",\n                        \"classmethod\", \"compile\", \"complex\", \"delattr\", \"dict\", \"dir\", \"divmod\",\n                        \"enumerate\", \"eval\", \"filter\", \"float\", \"format\", \"frozenset\",\n                        \"getattr\", \"globals\", \"hasattr\", \"hash\", \"help\", \"hex\", \"id\",\n                        \"input\", \"int\", \"isinstance\", \"issubclass\", \"iter\", \"len\",\n                        \"list\", \"locals\", \"map\", \"max\", \"memoryview\", \"min\", \"next\",\n                        \"object\", \"oct\", \"open\", \"ord\", \"pow\", \"property\", \"range\",\n                        \"repr\", \"reversed\", \"round\", \"set\", \"setattr\", \"slice\",\n                        \"sorted\", \"staticmethod\", \"str\", \"sum\", \"super\", \"tuple\",\n                        \"type\", \"vars\", \"zip\", \"__import__\", \"NotImplemented\",\n                        \"Ellipsis\", \"__debug__\"];\n  CodeMirror.registerHelper(\"hintWords\", \"python\", commonKeywords.concat(commonBuiltins));\n\n  function top(state) {\n    return state.scopes[state.scopes.length - 1];\n  }\n\n  CodeMirror.defineMode(\"python\", function(conf, parserConf) {\n    var ERRORCLASS = \"error\";\n\n    var delimiters = parserConf.delimiters || parserConf.singleDelimiters || /^[\\(\\)\\[\\]\\{\\}@,:`=;\\.\\\\]/;\n    //               (Backwards-compatibility with old, cumbersome config system)\n    var operators = [parserConf.singleOperators, parserConf.doubleOperators, parserConf.doubleDelimiters, parserConf.tripleDelimiters,\n                     parserConf.operators || /^([-+*/%\\/&|^]=?|[<>=]+|\\/\\/=?|\\*\\*=?|!=|[~!@]|\\.\\.\\.)/]\n    for (var i = 0; i < operators.length; i++) if (!operators[i]) operators.splice(i--, 1)\n\n    var hangingIndent = parserConf.hangingIndent || conf.indentUnit;\n\n    var myKeywords = commonKeywords, myBuiltins = commonBuiltins;\n    if (parserConf.extra_keywords != undefined)\n      myKeywords = myKeywords.concat(parserConf.extra_keywords);\n\n    if (parserConf.extra_builtins != undefined)\n      myBuiltins = myBuiltins.concat(parserConf.extra_builtins);\n\n    var py3 = !(parserConf.version && Number(parserConf.version) < 3)\n    if (py3) {\n      // since http://legacy.python.org/dev/peps/pep-0465/ @ is also an operator\n      var identifiers = parserConf.identifiers|| /^[_A-Za-z\\u00A1-\\uFFFF][_A-Za-z0-9\\u00A1-\\uFFFF]*/;\n      myKeywords = myKeywords.concat([\"nonlocal\", \"False\", \"True\", \"None\", \"async\", \"await\"]);\n      myBuiltins = myBuiltins.concat([\"ascii\", \"bytes\", \"exec\", \"print\"]);\n      var stringPrefixes = new RegExp(\"^(([rbuf]|(br)|(rb)|(fr)|(rf))?('{3}|\\\"{3}|['\\\"]))\", \"i\");\n    } else {\n      var identifiers = parserConf.identifiers|| /^[_A-Za-z][_A-Za-z0-9]*/;\n      myKeywords = myKeywords.concat([\"exec\", \"print\"]);\n      myBuiltins = myBuiltins.concat([\"apply\", \"basestring\", \"buffer\", \"cmp\", \"coerce\", \"execfile\",\n                                      \"file\", \"intern\", \"long\", \"raw_input\", \"reduce\", \"reload\",\n                                      \"unichr\", \"unicode\", \"xrange\", \"False\", \"True\", \"None\"]);\n      var stringPrefixes = new RegExp(\"^(([rubf]|(ur)|(br))?('{3}|\\\"{3}|['\\\"]))\", \"i\");\n    }\n    var keywords = wordRegexp(myKeywords);\n    var builtins = wordRegexp(myBuiltins);\n\n    // tokenizers\n    function tokenBase(stream, state) {\n      var sol = stream.sol() && state.lastToken != \"\\\\\"\n      if (sol) state.indent = stream.indentation()\n      // Handle scope changes\n      if (sol && top(state).type == \"py\") {\n        var scopeOffset = top(state).offset;\n        if (stream.eatSpace()) {\n          var lineOffset = stream.indentation();\n          if (lineOffset > scopeOffset)\n            pushPyScope(state);\n          else if (lineOffset < scopeOffset && dedent(stream, state) && stream.peek() != \"#\")\n            state.errorToken = true;\n          return null;\n        } else {\n          var style = tokenBaseInner(stream, state);\n          if (scopeOffset > 0 && dedent(stream, state))\n            style += \" \" + ERRORCLASS;\n          return style;\n        }\n      }\n      return tokenBaseInner(stream, state);\n    }\n\n    function tokenBaseInner(stream, state, inFormat) {\n      if (stream.eatSpace()) return null;\n\n      // Handle Comments\n      if (!inFormat && stream.match(/^#.*/)) return \"comment\";\n\n      // Handle Number Literals\n      if (stream.match(/^[0-9\\.]/, false)) {\n        var floatLiteral = false;\n        // Floats\n        if (stream.match(/^[\\d_]*\\.\\d+(e[\\+\\-]?\\d+)?/i)) { floatLiteral = true; }\n        if (stream.match(/^[\\d_]+\\.\\d*/)) { floatLiteral = true; }\n        if (stream.match(/^\\.\\d+/)) { floatLiteral = true; }\n        if (floatLiteral) {\n          // Float literals may be \"imaginary\"\n          stream.eat(/J/i);\n          return \"number\";\n        }\n        // Integers\n        var intLiteral = false;\n        // Hex\n        if (stream.match(/^0x[0-9a-f_]+/i)) intLiteral = true;\n        // Binary\n        if (stream.match(/^0b[01_]+/i)) intLiteral = true;\n        // Octal\n        if (stream.match(/^0o[0-7_]+/i)) intLiteral = true;\n        // Decimal\n        if (stream.match(/^[1-9][\\d_]*(e[\\+\\-]?[\\d_]+)?/)) {\n          // Decimal literals may be \"imaginary\"\n          stream.eat(/J/i);\n          // TODO - Can you have imaginary longs?\n          intLiteral = true;\n        }\n        // Zero by itself with no other piece of number.\n        if (stream.match(/^0(?![\\dx])/i)) intLiteral = true;\n        if (intLiteral) {\n          // Integer literals may be \"long\"\n          stream.eat(/L/i);\n          return \"number\";\n        }\n      }\n\n      // Handle Strings\n      if (stream.match(stringPrefixes)) {\n        var isFmtString = stream.current().toLowerCase().indexOf('f') !== -1;\n        if (!isFmtString) {\n          state.tokenize = tokenStringFactory(stream.current(), state.tokenize);\n          return state.tokenize(stream, state);\n        } else {\n          state.tokenize = formatStringFactory(stream.current(), state.tokenize);\n          return state.tokenize(stream, state);\n        }\n      }\n\n      for (var i = 0; i < operators.length; i++)\n        if (stream.match(operators[i])) return \"operator\"\n\n      if (stream.match(delimiters)) return \"punctuation\";\n\n      if (state.lastToken == \".\" && stream.match(identifiers))\n        return \"property\";\n\n      if (stream.match(keywords) || stream.match(wordOperators))\n        return \"keyword\";\n\n      if (stream.match(builtins))\n        return \"builtin\";\n\n      if (stream.match(/^(self|cls)\\b/))\n        return \"variable-2\";\n\n      if (stream.match(identifiers)) {\n        if (state.lastToken == \"def\" || state.lastToken == \"class\")\n          return \"def\";\n        return \"variable\";\n      }\n\n      // Handle non-detected items\n      stream.next();\n      return inFormat ? null :ERRORCLASS;\n    }\n\n    function formatStringFactory(delimiter, tokenOuter) {\n      while (\"rubf\".indexOf(delimiter.charAt(0).toLowerCase()) >= 0)\n        delimiter = delimiter.substr(1);\n\n      var singleline = delimiter.length == 1;\n      var OUTCLASS = \"string\";\n\n      function tokenNestedExpr(depth) {\n        return function(stream, state) {\n          var inner = tokenBaseInner(stream, state, true)\n          if (inner == \"punctuation\") {\n            if (stream.current() == \"{\") {\n              state.tokenize = tokenNestedExpr(depth + 1)\n            } else if (stream.current() == \"}\") {\n              if (depth > 1) state.tokenize = tokenNestedExpr(depth - 1)\n              else state.tokenize = tokenString\n            }\n          }\n          return inner\n        }\n      }\n\n      function tokenString(stream, state) {\n        while (!stream.eol()) {\n          stream.eatWhile(/[^'\"\\{\\}\\\\]/);\n          if (stream.eat(\"\\\\\")) {\n            stream.next();\n            if (singleline && stream.eol())\n              return OUTCLASS;\n          } else if (stream.match(delimiter)) {\n            state.tokenize = tokenOuter;\n            return OUTCLASS;\n          } else if (stream.match('{{')) {\n            // ignore {{ in f-str\n            return OUTCLASS;\n          } else if (stream.match('{', false)) {\n            // switch to nested mode\n            state.tokenize = tokenNestedExpr(0)\n            if (stream.current()) return OUTCLASS;\n            else return state.tokenize(stream, state)\n          } else if (stream.match('}}')) {\n            return OUTCLASS;\n          } else if (stream.match('}')) {\n            // single } in f-string is an error\n            return ERRORCLASS;\n          } else {\n            stream.eat(/['\"]/);\n          }\n        }\n        if (singleline) {\n          if (parserConf.singleLineStringErrors)\n            return ERRORCLASS;\n          else\n            state.tokenize = tokenOuter;\n        }\n        return OUTCLASS;\n      }\n      tokenString.isString = true;\n      return tokenString;\n    }\n\n    function tokenStringFactory(delimiter, tokenOuter) {\n      while (\"rubf\".indexOf(delimiter.charAt(0).toLowerCase()) >= 0)\n        delimiter = delimiter.substr(1);\n\n      var singleline = delimiter.length == 1;\n      var OUTCLASS = \"string\";\n\n      function tokenString(stream, state) {\n        while (!stream.eol()) {\n          stream.eatWhile(/[^'\"\\\\]/);\n          if (stream.eat(\"\\\\\")) {\n            stream.next();\n            if (singleline && stream.eol())\n              return OUTCLASS;\n          } else if (stream.match(delimiter)) {\n            state.tokenize = tokenOuter;\n            return OUTCLASS;\n          } else {\n            stream.eat(/['\"]/);\n          }\n        }\n        if (singleline) {\n          if (parserConf.singleLineStringErrors)\n            return ERRORCLASS;\n          else\n            state.tokenize = tokenOuter;\n        }\n        return OUTCLASS;\n      }\n      tokenString.isString = true;\n      return tokenString;\n    }\n\n    function pushPyScope(state) {\n      while (top(state).type != \"py\") state.scopes.pop()\n      state.scopes.push({offset: top(state).offset + conf.indentUnit,\n                         type: \"py\",\n                         align: null})\n    }\n\n    function pushBracketScope(stream, state, type) {\n      var align = stream.match(/^[\\s\\[\\{\\(]*(?:#|$)/, false) ? null : stream.column() + 1\n      state.scopes.push({offset: state.indent + hangingIndent,\n                         type: type,\n                         align: align})\n    }\n\n    function dedent(stream, state) {\n      var indented = stream.indentation();\n      while (state.scopes.length > 1 && top(state).offset > indented) {\n        if (top(state).type != \"py\") return true;\n        state.scopes.pop();\n      }\n      return top(state).offset != indented;\n    }\n\n    function tokenLexer(stream, state) {\n      if (stream.sol()) {\n        state.beginningOfLine = true;\n        state.dedent = false;\n      }\n\n      var style = state.tokenize(stream, state);\n      var current = stream.current();\n\n      // Handle decorators\n      if (state.beginningOfLine && current == \"@\")\n        return stream.match(identifiers, false) ? \"meta\" : py3 ? \"operator\" : ERRORCLASS;\n\n      if (/\\S/.test(current)) state.beginningOfLine = false;\n\n      if ((style == \"variable\" || style == \"builtin\")\n          && state.lastToken == \"meta\")\n        style = \"meta\";\n\n      // Handle scope changes.\n      if (current == \"pass\" || current == \"return\")\n        state.dedent = true;\n\n      if (current == \"lambda\") state.lambda = true;\n      if (current == \":\" && !state.lambda && top(state).type == \"py\" && stream.match(/^\\s*(?:#|$)/, false))\n        pushPyScope(state);\n\n      if (current.length == 1 && !/string|comment/.test(style)) {\n        var delimiter_index = \"[({\".indexOf(current);\n        if (delimiter_index != -1)\n          pushBracketScope(stream, state, \"])}\".slice(delimiter_index, delimiter_index+1));\n\n        delimiter_index = \"])}\".indexOf(current);\n        if (delimiter_index != -1) {\n          if (top(state).type == current) state.indent = state.scopes.pop().offset - hangingIndent\n          else return ERRORCLASS;\n        }\n      }\n      if (state.dedent && stream.eol() && top(state).type == \"py\" && state.scopes.length > 1)\n        state.scopes.pop();\n\n      return style;\n    }\n\n    var external = {\n      startState: function(basecolumn) {\n        return {\n          tokenize: tokenBase,\n          scopes: [{offset: basecolumn || 0, type: \"py\", align: null}],\n          indent: basecolumn || 0,\n          lastToken: null,\n          lambda: false,\n          dedent: 0\n        };\n      },\n\n      token: function(stream, state) {\n        var addErr = state.errorToken;\n        if (addErr) state.errorToken = false;\n        var style = tokenLexer(stream, state);\n\n        if (style && style != \"comment\")\n          state.lastToken = (style == \"keyword\" || style == \"punctuation\") ? stream.current() : style;\n        if (style == \"punctuation\") style = null;\n\n        if (stream.eol() && state.lambda)\n          state.lambda = false;\n        return addErr ? style + \" \" + ERRORCLASS : style;\n      },\n\n      indent: function(state, textAfter) {\n        if (state.tokenize != tokenBase)\n          return state.tokenize.isString ? CodeMirror.Pass : 0;\n\n        var scope = top(state)\n        var closing = scope.type == textAfter.charAt(0) ||\n            scope.type == \"py\" && !state.dedent && /^(else:|elif |except |finally:)/.test(textAfter)\n        if (scope.align != null)\n          return scope.align - (closing ? 1 : 0)\n        else\n          return scope.offset - (closing ? hangingIndent : 0)\n      },\n\n      electricInput: /^\\s*([\\}\\]\\)]|else:|elif |except |finally:)$/,\n      closeBrackets: {triples: \"'\\\"\"},\n      lineComment: \"#\",\n      fold: \"indent\"\n    };\n    return external;\n  });\n\n  CodeMirror.defineMIME(\"text/x-python\", \"python\");\n\n  var words = function(str) { return str.split(\" \"); };\n\n  CodeMirror.defineMIME(\"text/x-cython\", {\n    name: \"python\",\n    extra_keywords: words(\"by cdef cimport cpdef ctypedef enum except \"+\n                          \"extern gil include nogil property public \"+\n                          \"readonly struct union DEF IF ELIF ELSE\")\n  });\n\n});\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\n\nvar Array = global.Array;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar exec = uncurryThis(/./.exec);\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar replace = uncurryThis(''.replace);\nvar numberToString = uncurryThis(1.0.toString);\n\nvar tester = /[\\uD800-\\uDFFF]/g;\nvar low = /^[\\uD800-\\uDBFF]$/;\nvar hi = /^[\\uDC00-\\uDFFF]$/;\n\nvar fix = function (match, offset, string) {\n  var prev = charAt(string, offset - 1);\n  var next = charAt(string, offset + 1);\n  if ((exec(low, match) && !exec(hi, next)) || (exec(hi, match) && !exec(low, prev))) {\n    return '\\\\u' + numberToString(charCodeAt(match, 0), 16);\n  } return match;\n};\n\nvar FORCED = fails(function () {\n  return $stringify('\\uDF06\\uD834') !== '\"\\\\udf06\\\\ud834\"'\n    || $stringify('\\uDEAD') !== '\"\\\\udead\"';\n});\n\nif ($stringify) {\n  // `JSON.stringify` method\n  // https://tc39.es/ecma262/#sec-json.stringify\n  // https://github.com/tc39/proposal-well-formed-stringify\n  $({ target: 'JSON', stat: true, forced: FORCED }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      for (var i = 0, l = arguments.length, args = Array(l); i < l; i++) args[i] = arguments[i];\n      var result = apply($stringify, null, args);\n      return typeof result == 'string' ? replace(result, tester, fix) : result;\n    }\n  });\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonldMode = parserConfig.jsonld;\n  var jsonMode = parserConfig.json || jsonldMode;\n  var trackScope = parserConfig.trackScope !== false\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\"), D = kw(\"keyword d\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    return {\n      \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n      \"return\": D, \"break\": D, \"continue\": D, \"new\": kw(\"new\"), \"delete\": C, \"void\": C, \"throw\": C,\n      \"debugger\": kw(\"debugger\"), \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n      \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n      \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n      \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n      \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n      \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n      \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n      \"await\": C\n    };\n  }();\n\n  var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d[\\d_]*(?:[eE][+\\-]?[\\d_]+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.match(/^(?:x[\\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) {\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^[\\d_]*(?:n|(?:\\.[\\d_]*)?(?:[eE][+\\-]?[\\d_]+)?)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eat(\"=\");\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\" && stream.peek() == \"!\") {\n      stream.skipToEnd();\n      return ret(\"meta\", \"meta\");\n    } else if (ch == \"#\" && stream.eatWhile(wordRE)) {\n      return ret(\"variable\", \"property\")\n    } else if (ch == \"<\" && stream.match(\"!--\") ||\n               (ch == \"-\" && stream.match(\"->\") && !/\\S/.test(stream.string.slice(0, stream.start)))) {\n      stream.skipToEnd()\n      return ret(\"comment\", \"comment\")\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\") {\n        if (stream.eat(\"=\")) {\n          if (ch == \"!\" || ch == \"=\") stream.eat(\"=\")\n        } else if (/[<>*+\\-|&?]/.test(ch)) {\n          stream.eat(ch)\n          if (ch == \">\") stream.eat(ch)\n        }\n      }\n      if (ch == \"?\" && stream.eat(\".\")) return ret(\".\")\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^(\\s|\\/\\*([^*]|\\*(?!\\/))*?\\*\\/)*[\\[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)){\n        state.tokenize = tokenBase;\n        return ret(\"jsonld-keyword\", \"meta\");\n      }\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/`]/.test(ch)) {\n        for (;; --pos) {\n          if (pos == 0) return\n          var next = stream.string.charAt(pos - 1)\n          if (next == ch && stream.string.charAt(pos - 2) != \"\\\\\") { pos--; break }\n        }\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true,\n                     \"regexp\": true, \"this\": true, \"import\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    if (!trackScope) return false\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function inList(name, list) {\n    for (var v = list; v; v = v.next) if (v.name == name) return true\n    return false;\n  }\n  function register(varname) {\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (!trackScope) return\n    if (state.context) {\n      if (state.lexical.info == \"var\" && state.context && state.context.block) {\n        // FIXME function decls are also not block scoped\n        var newContext = registerVarScoped(varname, state.context)\n        if (newContext != null) {\n          state.context = newContext\n          return\n        }\n      } else if (!inList(varname, state.localVars)) {\n        state.localVars = new Var(varname, state.localVars)\n        return\n      }\n    }\n    // Fall through means this is global\n    if (parserConfig.globalVars && !inList(varname, state.globalVars))\n      state.globalVars = new Var(varname, state.globalVars)\n  }\n  function registerVarScoped(varname, context) {\n    if (!context) {\n      return null\n    } else if (context.block) {\n      var inner = registerVarScoped(varname, context.prev)\n      if (!inner) return null\n      if (inner == context.prev) return context\n      return new Context(inner, context.vars, true)\n    } else if (inList(varname, context.vars)) {\n      return context\n    } else {\n      return new Context(context.prev, new Var(varname, context.vars), false)\n    }\n  }\n\n  function isModifier(name) {\n    return name == \"public\" || name == \"private\" || name == \"protected\" || name == \"abstract\" || name == \"readonly\"\n  }\n\n  // Combinators\n\n  function Context(prev, vars, block) { this.prev = prev; this.vars = vars; this.block = block }\n  function Var(name, next) { this.name = name; this.next = next }\n\n  var defaultVars = new Var(\"this\", new Var(\"arguments\", null))\n  function pushcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, false)\n    cx.state.localVars = defaultVars\n  }\n  function pushblockcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, true)\n    cx.state.localVars = null\n  }\n  pushcontext.lex = pushblockcontext.lex = true\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars\n    cx.state.context = cx.state.context.prev\n  }\n  popcontext.lex = true\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\" || type == \"}\" || type == \")\" || type == \"]\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"keyword d\") return cx.stream.match(/^\\s*$/, false) ? cont() : cont(pushlex(\"stat\"), maybeexpression, expect(\";\"), poplex);\n    if (type == \"debugger\") return cont(expect(\";\"));\n    if (type == \"{\") return cont(pushlex(\"}\"), pushblockcontext, block, poplex, popcontext);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), pushblockcontext, forspec, statement, popcontext, poplex);\n    if (type == \"class\" || (isTS && value == \"interface\")) {\n      cx.marked = \"keyword\"\n      return cont(pushlex(\"form\", type == \"class\" ? type : value), className, poplex)\n    }\n    if (type == \"variable\") {\n      if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else if (isTS && (value == \"module\" || value == \"enum\" || value == \"type\") && cx.stream.match(/^\\s*\\w/, false)) {\n        cx.marked = \"keyword\"\n        if (value == \"enum\") return cont(enumdef);\n        else if (value == \"type\") return cont(typename, expect(\"operator\"), typeexpr, expect(\";\"));\n        else return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n      } else if (isTS && value == \"namespace\") {\n        cx.marked = \"keyword\"\n        return cont(pushlex(\"form\"), expression, statement, poplex)\n      } else if (isTS && value == \"abstract\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), pushblockcontext,\n                                      block, poplex, poplex, popcontext);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, maybeCatchBinding, statement, poplex, popcontext);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function maybeCatchBinding(type) {\n    if (type == \"(\") return cont(funarg, expect(\")\"))\n  }\n  function expression(type, value) {\n    return expressionInner(type, value, false);\n  }\n  function expressionNoComma(type, value) {\n    return expressionInner(type, value, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, value, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), classExpression, poplex); }\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(maybeexpression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (isTS && value == \"<\" && cx.stream.match(/^([^<>]|<[^<>]*>)*>\\s*\\(/, false))\n        return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n    if (type == \"regexp\") {\n      cx.state.lastType = cx.marked = \"operator\"\n      cx.stream.backUp(cx.stream.pos - cx.stream.start - 1)\n      return cont(expr)\n    }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(maybeexpression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      var m // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n      if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\\s*:\\s*/, false)))\n        cx.state.fatArrowAt = cx.stream.pos + m[0].length\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (isTS && isModifier(value)) {\n      cx.marked = \"keyword\"\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expressionNoComma, afterprop);\n    } else if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(objprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      if (sep && sep.indexOf(\";\") > -1) return pass(what)\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function maybetypeOrIn(type, value) {\n    if (isTS && (type == \":\" || value == \"in\")) return cont(typeexpr)\n  }\n  function mayberettype(type) {\n    if (isTS && type == \":\") {\n      if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false)) return cont(expression, isKW, typeexpr)\n      else return cont(typeexpr)\n    }\n  }\n  function isKW(_, value) {\n    if (value == \"is\") {\n      cx.marked = \"keyword\"\n      return cont()\n    }\n  }\n  function typeexpr(type, value) {\n    if (value == \"keyof\" || value == \"typeof\" || value == \"infer\" || value == \"readonly\") {\n      cx.marked = \"keyword\"\n      return cont(value == \"typeof\" ? expressionNoComma : typeexpr)\n    }\n    if (type == \"variable\" || value == \"void\") {\n      cx.marked = \"type\"\n      return cont(afterType)\n    }\n    if (value == \"|\" || value == \"&\") return cont(typeexpr)\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), typeprops, poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType, afterType)\n    if (type == \"<\") return cont(commasep(typeexpr, \">\"), typeexpr)\n    if (type == \"quasi\") { return pass(quasiType, afterType); }\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprops(type) {\n    if (type.match(/[\\}\\)\\]]/)) return cont()\n    if (type == \",\" || type == \";\") return cont(typeprops)\n    return pass(typeprop, typeprops)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\" || type == \"number\" || type == \"string\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expect(\"variable\"), maybetypeOrIn, expect(\"]\"), typeprop)\n    } else if (type == \"(\") {\n      return pass(functiondecl, typeprop)\n    } else if (!type.match(/[;\\}\\)\\],]/)) {\n      return cont()\n    }\n  }\n  function quasiType(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasiType);\n    return cont(typeexpr, continueQuasiType);\n  }\n  function continueQuasiType(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasiType);\n    }\n  }\n  function typearg(type, value) {\n    if (type == \"variable\" && cx.stream.match(/^\\s*[?:]/, false) || value == \"?\") return cont(typearg)\n    if (type == \":\") return cont(typeexpr)\n    if (type == \"spread\") return cont(typearg)\n    return pass(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\" || value == \"&\") return cont(typeexpr)\n    if (type == \"[\") return cont(typeexpr, expect(\"]\"), afterType)\n    if (value == \"extends\" || value == \"implements\") { cx.marked = \"keyword\"; return cont(typeexpr) }\n    if (value == \"?\") return cont(typeexpr, expect(\":\"), typeexpr)\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function typeparam() {\n    return pass(typeexpr, maybeTypeDefault)\n  }\n  function maybeTypeDefault(_, value) {\n    if (value == \"=\") return cont(typeexpr)\n  }\n  function vardef(_, value) {\n    if (value == \"enum\") {cx.marked = \"keyword\"; return cont(enumdef)}\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(pattern) }\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(eltpattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    if (type == \"[\") return cont(expression, expect(']'), expect(':'), proppattern);\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function eltpattern() {\n    return pass(pattern, maybeAssign)\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type, value) {\n    if (value == \"await\") return cont(forspec);\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, forspec2);\n    if (type == \"variable\") return cont(forspec2);\n    return pass(forspec2)\n  }\n  function forspec2(type, value) {\n    if (type == \")\") return cont()\n    if (type == \";\") return cont(forspec2)\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression, forspec2) }\n    return pass(expression, forspec2)\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondef)\n  }\n  function functiondecl(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondecl);}\n    if (type == \"variable\") {register(value); return cont(functiondecl);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondecl)\n  }\n  function typename(type, value) {\n    if (type == \"keyword\" || type == \"variable\") {\n      cx.marked = \"type\"\n      return cont(typename)\n    } else if (value == \"<\") {\n      return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex)\n    }\n  }\n  function funarg(type, value) {\n    if (value == \"@\") cont(expression, funarg)\n    if (type == \"spread\") return cont(funarg);\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(funarg); }\n    if (isTS && type == \"this\") return cont(maybetype, maybeAssign)\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\")) {\n      if (value == \"implements\") cx.marked = \"keyword\";\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    }\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\" || (isTS && isModifier(value))) &&\n         cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      return cont(classfield, classBody);\n    }\n    if (type == \"number\" || type == \"string\") return cont(classfield, classBody);\n    if (type == \"[\")\n      return cont(expression, maybetype, expect(\"]\"), classfield, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (isTS && type == \"(\") return pass(functiondecl, classBody)\n    if (type == \";\" || type == \",\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"!\") return cont(classfield)\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    var context = cx.state.lexical.prev, isInterface = context && context.info == \"interface\"\n    return pass(isInterface ? functiondecl : functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    if (type == \"(\") return pass(expression);\n    if (type == \".\") return pass(maybeoperatorComma);\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n  function enumdef() {\n    return pass(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), commasep(enummember, \"}\"), poplex, poplex)\n  }\n  function enummember() {\n    return pass(pattern, maybeAssign);\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && new Context(null, null, false),\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment || state.tokenize == tokenQuasi) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse && c != popcontext) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info.length + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    blockCommentContinue: jsonMode ? null : \" * \",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: jsonldMode,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      parseJS(state, \"atom\", \"atom\", \"true\", new CodeMirror.StringStream(\"\", 2, null))\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", { name: \"javascript\", json: true });\nCodeMirror.defineMIME(\"application/x-json\", { name: \"javascript\", json: true });\nCodeMirror.defineMIME(\"application/manifest+json\", { name: \"javascript\", json: true })\nCodeMirror.defineMIME(\"application/ld+json\", { name: \"javascript\", jsonld: true });\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n\n});\n"],"sourceRoot":""}