{"version":3,"sources":["webpack:///./src/api/variate.js","webpack:///./src/views/variate/variate_list.vue","webpack:///./src/views/variate/variate_list.vue?667d","webpack:///./src/utils/request.js"],"names":["variate_api","data","method","request","url","variate_get","params","variate_del","type","to","columns","data-source","scroll","bodyCell","record","column","text","dataIndex","id","key","deletes","title","width","ellipsis","created","variate","then","res","console","log","setup","code","message","success","content","duration","location","reload","result","__exports__","render","axios","create","baseURL","timeout","defaults","headers","post","errorHandler","error","response","token","localStorage","getItem","status","notification","description","window","href","isLogin","router","useRouter","push","Promise","reject","interceptors","use","config"],"mappings":"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","file":"js/variate_list.da9a6443.js","sourcesContent":["import request from '@/utils/request'\r\n\r\nexport function variate_api(data,method){\r\n    return request.request({\r\n        method: method,\r\n          url: \"globalsvariate/\",\r\n          data: data,\r\n    })\r\n}\r\n\r\nexport function variate_get(data){\r\n    return request.request({\r\n        method: \"get\",\r\n          url: \"globalsvariate/\",\r\n          params: data,\r\n    })\r\n}\r\n\r\nexport function variate_put(data){\r\n    return request.request({\r\n        method: \"put\",\r\n          url: \"globalsvariate/\",\r\n          data: data,\r\n    })\r\n}\r\n\r\nexport function variate_create(data){\r\n    return request.request({\r\n        method: \"post\",\r\n          url: \"globalsvariate/\",\r\n          data: data,\r\n    })\r\n}\r\n\r\nexport function variate_del(data){\r\n    return request.request({\r\n        method: \"delete\",\r\n          url: \"globalsvariate/\",\r\n          data: [data],\r\n    })\r\n}","\r\n<template>\r\n   <a-button  type=\"primary\" >\r\n     <router-link to=\"create_variate\">Create\r\n     </router-link>\r\n    </a-button>\r\n  <a-table :columns=\"columns\" :data-source=\"data\" :scroll=\"{ x: 1200, y: 800 }\">\r\n      <template #bodyCell=\"{ record,column,text  }\">\r\n      <template v-if=\"column.dataIndex === 'name'\">\r\n          <router-link :to=\"{path:'/case',query:{project_id:record.id}}\" >\r\n              <a  >{{ text }}</a>\r\n          </router-link>\r\n      </template>\r\n\r\n      <template v-if=\"column.key === 'operation'\">\r\n        <a @click=\"deletes(record)\" >Delete</a> |\r\n          <router-link :to=\"{path:'/create_variate',query:{id: record.id,}}\" >\r\n              <a  >Edit</a>\r\n          </router-link>\r\n      </template>\r\n    </template>\r\n  </a-table>\r\n</template>\r\n<script>\r\nimport { defineComponent } from 'vue';\r\nimport {variate_get,variate_del} from '@/api/variate'\r\n\r\nconst columns = [{\r\n  title: '变量名',\r\n  width: '20%' ,\r\n  dataIndex: 'key',\r\n  ellipsis: true,\r\n  key: 'key',\r\n\r\n}, {\r\n  title: '变量值',\r\n  width: '20%',\r\n  dataIndex: 'value',\r\n  ellipsis: true,\r\n  key: 'value',\r\n\r\n}, {\r\n  title: '环境',\r\n  dataIndex: 'env',\r\n  key: 'env',\r\n  ellipsis: true,\r\n  width: '20%',\r\n}, {\r\n  title: '项目',\r\n  dataIndex: 'project__name',\r\n  key: 'project__name',\r\n  ellipsis: true,\r\n  width: '20%',\r\n},\r\n\r\n\r\n  {\r\n  title: 'createtime',\r\n  dataIndex: 'create_time',\r\n  key: 'create_time',\r\n  ellipsis: true,\r\n  width: '20%',\r\n}, {\r\n  title: 'Action',\r\n  key: 'operation',\r\n  ellipsis: true,\r\n  width: 120,\r\n}];\r\n\r\nimport {message} from \"ant-design-vue\";\r\nexport default defineComponent({\r\n  data() {\r\n    return {\r\n      data:[],\r\n      columns,\r\n    };\r\n  },\r\n  created() {\r\n    variate_get()\r\n     .then((res) => {\r\n         this.data =  res.data;\r\n\r\n        console.log('=========',);\r\n     });\r\n\r\n  },\r\n\r\n  setup(){\r\n    const deletes = (record) => {\r\n      variate_del(record.id )\r\n      .then((res) => {\r\n               if (res.code == 200)\r\n               {\r\n                   message.success({\r\n                           content: \"删除成功！\",\r\n                           duration: 5}\r\n                   );\r\n                   location.reload();\r\n               }\r\n               else {\r\n                    message.success({\r\n                           content: \"删除失败！\",\r\n                           duration: 5}\r\n                   );\r\n               }\r\n\r\n             console.log(res);\r\n             console.log(res.data.data.result);\r\n           });\r\n    }\r\n\r\n    return{\r\n        deletes\r\n    }\r\n  }\r\n\r\n// // methods: {\r\n// //     func(record) {\r\n// //         this.$router.push({name: '/case', query: {projrctid: record.id}});\r\n// //\r\n// //     }\r\n//\r\n// }\r\n});\r\n</script>\r\n\r\n","import { render } from \"./variate_list.vue?vue&type=template&id=7c991207\"\nimport script from \"./variate_list.vue?vue&type=script&lang=js\"\nexport * from \"./variate_list.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\code\\\\GitHub\\\\vue_apitest\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import axios from 'axios'\r\n// import store from '@/store'\r\n// import storage from 'store'\r\nimport notification from 'ant-design-vue/es/notification'\r\n// import { VueAxios } from './axios'\r\n// import { token } from '@/store/mutation-types'\r\nimport { useRouter } from 'vue-router';\r\n\r\n// 创建 axios 实例\r\nconst request = axios.create({\r\n  // API 请求的默认前缀\r\n  baseURL: 'https://124.71.4.214:8000/api/',\r\n  timeout: 10000 // 请求超时时间\r\n})\r\nrequest.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8';//配置请求头信息。\r\n// 异常拦截处理器\r\nconst errorHandler = (error) => {\r\n  if (error.response) {\r\n    const data = error.response.data\r\n    // 从 localstorage 获取 token\r\n    const token = localStorage.getItem(\"token\")\r\n    if (error.response.status === 403) {\r\n      notification.error({\r\n        message: 'Forbidden',\r\n        description: data.message\r\n      })\r\n      window.location.href=\"#/login\";\r\n      // const router = useRouter();\r\n      // router.push(\"/login\")\r\n\r\n    }\r\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\r\n      notification.error({\r\n        message: 'Unauthorized',\r\n        description: 'Authorization verification failed'\r\n\r\n      })\r\n      if (token) {\r\n        // store.dispatch('Logout').then(() => {\r\n        //   setTimeout(() => {\r\n        //     window.location.reload()\r\n        //   }, 1500)\r\n        window.location.reload()\r\n        // })\r\n      }\r\n      // window.location.href=\"/login\";\r\n      const router = useRouter();\r\n      router.push(\"/login\")\r\n    }\r\n\r\n  }\r\n  return Promise.reject(error)\r\n}\r\n\r\n// request interceptor\r\nrequest.interceptors.request.use(config => {\r\n  const token = localStorage.getItem(\"token\")\r\n  // 如果 token 存在\r\n  // 让每个请求携带自定义 token 请根据实际情况自行修改\r\n  if (token) {\r\n    config.headers['Authorization'] = token\r\n  }\r\n  return config\r\n}, errorHandler)\r\n\r\n// response interceptor\r\nrequest.interceptors.response.use((response) => {\r\n  return response.data\r\n}, errorHandler)\r\n\r\n// const installer = {\r\n//   vm: {},\r\n//   install (Vue) {\r\n//     Vue.use(VueAxios, request)\r\n//   }\r\n// }\r\n\r\nexport default request\r\n\r\n// export {\r\n//   // installer as VueAxios,\r\n//   request as axios\r\n// }\r\n"],"sourceRoot":""}