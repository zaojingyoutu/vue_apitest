{"version":3,"sources":["webpack:///./src/views/login/login.vue?9059","webpack:///./src/utils/request.js","webpack:///./src/views/login/login.vue","webpack:///./node_modules/@ant-design/icons-svg/es/asn/LockOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/LockOutlined.js","webpack:///./src/api/login.js","webpack:///./src/api/register.js","webpack:///./src/views/login/login.vue?fea8"],"names":["request","axios","create","baseURL","timeout","defaults","headers","post","errorHandler","error","response","data","token","localStorage","getItem","status","notification","message","description","window","location","href","result","isLogin","reload","router","useRouter","push","Promise","reject","interceptors","use","config","style","class","model","formState","name","onFinish","onFinishFailed","label","rules","value","username","prefix","password","no-style","checked","remember","disabled","type","html-type","login","showModal","visible","title","handleOks","label-col","labelCol","wrapper-col","wrapperCol","required","modelRef","email","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","defineProperty","configurable","writable","props","context","p","attrs","AntdIcon","displayName","inheritAttrs","Login","method","url","register_get","components","UserOutlined","LockOutlined","setup","values","console","log","errorInfo","then","res","success","content","msg","duration","code","setItem","access_token","handleOk","e","__exports__","render"],"mappings":"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","file":"js/login.2d5b823d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./login.vue?vue&type=style&index=0&id=6be9a864&lang=css\"","import axios from 'axios'\r\n// import store from '@/store'\r\n// import storage from 'store'\r\nimport notification from 'ant-design-vue/es/notification'\r\n// import { VueAxios } from './axios'\r\n// import { token } from '@/store/mutation-types'\r\nimport { useRouter } from 'vue-router';\r\n\r\n// 创建 axios 实例\r\nconst request = axios.create({\r\n  // API 请求的默认前缀\r\n  baseURL: 'https://124.71.4.214:8000/api/',\r\n  timeout: 10000 // 请求超时时间\r\n})\r\nrequest.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8';//配置请求头信息。\r\n// 异常拦截处理器\r\nconst errorHandler = (error) => {\r\n  if (error.response) {\r\n    const data = error.response.data\r\n    // 从 localstorage 获取 token\r\n    const token = localStorage.getItem(\"token\")\r\n    if (error.response.status === 403) {\r\n      notification.error({\r\n        message: 'Forbidden',\r\n        description: data.message\r\n      })\r\n      window.location.href=\"#/login\";\r\n      // const router = useRouter();\r\n      // router.push(\"/login\")\r\n\r\n    }\r\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\r\n      notification.error({\r\n        message: 'Unauthorized',\r\n        description: 'Authorization verification failed'\r\n\r\n      })\r\n      if (token) {\r\n        // store.dispatch('Logout').then(() => {\r\n        //   setTimeout(() => {\r\n        //     window.location.reload()\r\n        //   }, 1500)\r\n        window.location.reload()\r\n        // })\r\n      }\r\n      // window.location.href=\"/login\";\r\n      const router = useRouter();\r\n      router.push(\"/login\")\r\n    }\r\n\r\n  }\r\n  return Promise.reject(error)\r\n}\r\n\r\n// request interceptor\r\nrequest.interceptors.request.use(config => {\r\n  const token = localStorage.getItem(\"token\")\r\n  // 如果 token 存在\r\n  // 让每个请求携带自定义 token 请根据实际情况自行修改\r\n  if (token) {\r\n    config.headers['Authorization'] = token\r\n  }\r\n  return config\r\n}, errorHandler)\r\n\r\n// response interceptor\r\nrequest.interceptors.response.use((response) => {\r\n  return response.data\r\n}, errorHandler)\r\n\r\n// const installer = {\r\n//   vm: {},\r\n//   install (Vue) {\r\n//     Vue.use(VueAxios, request)\r\n//   }\r\n// }\r\n\r\nexport default request\r\n\r\n// export {\r\n//   // installer as VueAxios,\r\n//   request as axios\r\n// }\r\n","<template>\r\n  <div style=\"position: absolute;\r\n    right: 40%;\r\n    width: 400px;\r\n    border: 3px solid #42b983;\r\n    padding: 10px;\r\n    top: 50%;\r\n    height: 300px;\r\n\">\r\n    <h2>欢迎来到接口测试平台</h2><br>\r\n    <a-form\r\n    :model=\"formState\"\r\n    name=\"normal_login\"\r\n    class=\"login-form\"\r\n    @finish=\"onFinish\"\r\n    @finishFailed=\"onFinishFailed\"\r\n  >\r\n    <a-form-item\r\n      label=\"Username\"\r\n      name=\"username\"\r\n      :rules=\"[{ required: true, message: 'Please input your username!' }]\"\r\n    >\r\n      <a-input v-model:value=\"formState.username\">\r\n        <template #prefix>\r\n          <UserOutlined class=\"site-form-item-icon\" />\r\n        </template>\r\n      </a-input>\r\n    </a-form-item>\r\n\r\n    <a-form-item\r\n      label=\"Password\"\r\n      name=\"password\"\r\n      :rules=\"[{ required: true, message: 'Please input your password!' }]\"\r\n    >\r\n      <a-input-password v-model:value=\"formState.password\">\r\n        <template #prefix>\r\n          <LockOutlined class=\"site-form-item-icon\" />\r\n        </template>\r\n      </a-input-password>\r\n    </a-form-item>\r\n\r\n    <div class=\"login-form-wrap\">\r\n      <a-form-item name=\"remember\" no-style>\r\n        <a-checkbox v-model:checked=\"formState.remember\">Remember me</a-checkbox>\r\n      </a-form-item>\r\n      <a class=\"login-form-forgot\" href=\"\">Forgot password</a>\r\n    </div>\r\n\r\n\r\n    <a-form-item>\r\n      <a-button :disabled=\"disabled\" type=\"primary\" html-type=\"submit\" class=\"login-form-button\" @click=\"login\">\r\n        Login\r\n      </a-button>\r\n     \r\n    <div style=\"\">\r\n      <a type=\"primary\" @click=\"showModal\">register now!</a>\r\n      <a-modal v-model:visible=\"visible\" title=\"register\" @ok=\"handleOks\">\r\n        <div>\r\n          <a-form :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n    <a-form-item label=\"name\" required>\r\n      <a-input v-model:value=\"modelRef.username\" />\r\n    </a-form-item>\r\n     <a-form-item label=\"email\" >\r\n      <a-input v-model:value=\"modelRef.email\" />\r\n    </a-form-item>\r\n    <a-form-item label=\"password\" required >\r\n      <a-input-password v-model:value=\"modelRef.password\" />\r\n    </a-form-item>\r\n\r\n  </a-form>\r\n        </div>\r\n      </a-modal>\r\n    </div>\r\n    </a-form-item>\r\n  </a-form>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport { defineComponent, reactive, computed ,ref} from 'vue';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons-vue';\r\n// import axios from \"axios\";\r\nimport {message} from \"ant-design-vue\";\r\nimport {Login} from '@/api/login'\r\nimport {register_get} from '@/api/register'\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    UserOutlined,\r\n    LockOutlined,\r\n  },\r\n\r\n  setup() {\r\n     const router = useRouter();\r\n        const modelRef = reactive({\r\n      username: '',\r\n      email: '',\r\n      password: '',\r\n        \r\n    });\r\n\r\n    const formState = reactive({\r\n      username: '',\r\n      password: '',\r\n      remember: true,\r\n    });\r\n\r\n    const onFinish = values => {\r\n      console.log('Success:', values);\r\n    };\r\n\r\n    const onFinishFailed = errorInfo => {\r\n      console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    const disabled = computed(() => {\r\n      return !(formState.username && formState.password);\r\n    });\r\n\r\n\r\nconst login = () =>Login(formState).then((res) => {\r\n               message.success({\r\n                content: res.msg,\r\n                duration: 5\r\n                });\r\n                console.log(res.data)\r\n                if (res.code == 200){\r\n                  router.push(\"/project\")\r\n\r\n                  // window.location.href=\"project\";\r\n                  localStorage.setItem('token','Bearer ' +  res.data.access_token)\r\n}});\r\n\r\n const visible = ref(false);\r\n\r\n    const showModal = () => {\r\n      visible.value = true;\r\n    };\r\n\r\n    const handleOk = e => {\r\n      console.log(e);\r\n       register_get(modelRef).then((res) => {\r\n                message.success({\r\n                content: res.msg,\r\n                duration: 5\r\n                });\r\n                if (res.code == 200){\r\n                  window.location.href=\"/login\";\r\n\r\n                }\r\n             console.log(res);\r\n           });\r\n    };\r\n\r\n\r\nreturn {\r\n      formState,\r\n      onFinish,\r\n      onFinishFailed,\r\n      disabled,\r\n       visible,\r\n      showModal,\r\n      handleOk,\r\n      modelRef,\r\n  login,\r\n    };\r\n  },\r\n\r\n});\r\n</script>\r\n<style>\r\n#components-form-demo-normal-login .login-form {\r\n  max-width: 300px;\r\n}\r\n#components-form-demo-normal-login .login-form-wrap {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n#components-form-demo-normal-login .login-form-forgot {\r\n  margin-bottom: 24px;\r\n}\r\n#components-form-demo-normal-login .login-form-button {\r\n  width: 100%;\r\n}\r\n</style>","// This icon file is generated automatically.\nvar LockOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z\" } }] }, \"name\": \"lock\", \"theme\": \"outlined\" };\nexport default LockOutlined;\n","import * as _vue from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport LockOutlinedSvg from \"@ant-design/icons-svg/es/asn/LockOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar LockOutlined = function LockOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _vue.createVNode(AntdIcon, _vue.mergeProps(p, {\n    \"icon\": LockOutlinedSvg\n  }), null);\n};\n\nLockOutlined.displayName = 'LockOutlined';\nLockOutlined.inheritAttrs = false;\nexport default LockOutlined;","import request from '@/utils/request'\r\n\r\nexport function Login(data){\r\n    return request.request({\r\n        method: \"post\",\r\n          url: \"login/\",\r\n          data: data,\r\n    })\r\n}\r\n\r\n","import request from '@/utils/request'\r\n\r\n\r\nexport function register_get(data){\r\n    return request.request({\r\n        method: \"post\",\r\n          url: \"register/\",\r\n          data: data,\r\n    })\r\n}\r\n","import { render } from \"./login.vue?vue&type=template&id=6be9a864\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\n\nimport \"./login.vue?vue&type=style&index=0&id=6be9a864&lang=css\"\n\nimport exportComponent from \"D:\\\\code\\\\GitHub\\\\vue_apitest\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}