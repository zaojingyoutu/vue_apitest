{"version":3,"sources":["webpack:///./src/views/user/userList.vue","webpack:///./src/views/user/userList.vue?cffa","webpack:///./src/utils/request.js","webpack:///./src/api/user.js"],"names":["style","type","to","columns","data-source","data","scroll","bodyCell","record","column","text","dataIndex","id","key","deletes","title","width","created","user","then","res","console","log","setup","code","message","success","content","duration","location","reload","result","__exports__","render","allURL","process","VUE_APP_FLAG","VUE_APP_BASEURL","request","axios","create","baseURL","timeout","defaults","headers","post","errorHandler","error","response","token","localStorage","getItem","status","notification","description","window","href","isLogin","router","useRouter","push","Promise","reject","interceptors","use","config","user_api","method","url","user_get","params","user_del"],"mappings":"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","file":"js/userList.9638ccee.js","sourcesContent":["\n<template>\n<div style=\"margin-right: 20px;\n    margin-left: 20px;\">\n  <div style=\"margin-right: 10px;\n    margin-left: 10px;float: left;margin-top: 5px;\">\n            <a-button  type=\"primary\" >\n      <router-link to=\"/createUser\" > \n        <a  style=\"color: white\">Create</a>\n      </router-link>\n      </a-button>\n    </div>\n  <a-table :columns=\"columns\" :data-source=\"data\" :scroll=\"{ x: 1200, y: 700 }\">\n      <template #bodyCell=\"{ record,column,text  }\">\n      <template v-if=\"column.dataIndex === 'username'\">\n          <router-link :to=\"{path:'/createUser',query:{id:record.id}}\" >\n              <a  >{{ text }}</a>\n          </router-link>\n      </template>\n\n      <template v-if=\"column.key === 'operation'\">\n        <a @click=\"deletes(record)\" >Delete</a> |\n          <router-link :to=\"{path:'/createUser',query:{id: record.id,}}\" >\n              <a  >Edit</a>\n          </router-link>\n      </template>\n    </template>\n  </a-table>\n</div>\n</template>\n<script>\nimport { defineComponent } from 'vue';\nimport {user_get,user_del} from '@/api/user'\n\nconst columns = [{\n  title: 'Full Name',\n  width: '20%' ,\n  dataIndex: 'username',\n  key: 'namusernamee',\n\n}, {\n  title: 'email',\n  width: '20%',\n  dataIndex: 'email',\n  key: 'email',\n\n}, {\n  title: 'date_joined',\n  dataIndex: 'date_joined',\n  key: 'date_joined',\n  width: '20%',\n}, {\n  title: 'last_login',\n  dataIndex: 'last_login',\n  key: 'last_login',\n  width: '20%',\n},\n {\n  title: 'Action',\n  key: 'operation',\n  width: 120,\n}];\n\nimport {message} from \"ant-design-vue\";\nexport default defineComponent({\n  data() {\n    return {\n      data:[],\n      columns,\n    };\n  },\n  created() {\n    user_get().then((res) => {\n         this.data =  res.data;\n        console.log('=========',);\n     });\n\n  },\n\n  setup(){\n    const deletes = (record) => {\n         user_del(record.id).then((res) => {\n               if (res.code == 200)\n               {\n                   message.success({\n                           content: \"删除成功！\",\n                           duration: 5}\n                   );\n                   location.reload();\n               }\n               else {\n                    message.success({\n                           content: \"删除失败！\",\n                           duration: 5}\n                   );\n               }\n\n             console.log(res);\n             console.log(res.data.data.result);\n           });\n    }\n\n    return{\n        deletes\n    }\n  }\n\n});\n</script>\n\n","import { render } from \"./userList.vue?vue&type=template&id=029c61d0\"\nimport script from \"./userList.vue?vue&type=script&lang=js\"\nexport * from \"./userList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/project/vue_apitest/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import axios from 'axios'\n// import store from '@/store'\n// import storage from 'store'\nimport notification from 'ant-design-vue/es/notification'\n// import { VueAxios } from './axios'\n// import { token } from '@/store/mutation-types'\nimport { useRouter } from 'vue-router';\n\nlet allURL;\nif (process.env.VUE_APP_FLAG == \"dev\") {\n  allURL = process.env.VUE_APP_BASEURL;\n} else{\n  allURL = \"https://www.zaojingyoutu.top:8000/api/\";\n}\n\n\n// 创建 axios 实例\nconst request = axios.create({\n  // API 请求的默认前缀\n  baseURL: allURL,\n  timeout: 300000 // 请求超时时间\n})\nrequest.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8';//配置请求头信息。\n// 异常拦截处理器\nconst errorHandler = (error) => {\n  if (error.response) {\n    const data = error.response.data\n    // 从 localstorage 获取 token\n    const token = localStorage.getItem(\"token\")\n    if (error.response.status === 403) {\n      notification.error({\n        message: 'Forbidden',\n        description: data.message\n      })\n      window.location.href=\"#/login\";\n      // const router = useRouter();\n      // router.push(\"/login\")\n\n    }\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\n      notification.error({\n        message: 'Unauthorized',\n        description: 'Authorization verification failed'\n\n      })\n      if (token) {\n        // store.dispatch('Logout').then(() => {\n        //   setTimeout(() => {\n        //     window.location.reload()\n        //   }, 1500)\n        window.location.reload()\n        // })\n      }\n      // window.location.href=\"/login\";\n      const router = useRouter();\n      router.push(\"/login\")\n    }\n\n  }\n  return Promise.reject(error)\n}\n\n// request interceptor\nrequest.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\")\n  // 如果 token 存在\n  // 让每个请求携带自定义 token 请根据实际情况自行修改\n  if (token) {\n    config.headers['Authorization'] = token\n  }\n  return config\n}, errorHandler)\n\n// response interceptor\nrequest.interceptors.response.use((response) => {\n  if(typeof response.data != 'string'){\n    response.data['status'] = response.status\n}\n  return response.data\n}, errorHandler)\n\n// const installer = {\n//   vm: {},\n//   install (Vue) {\n//     Vue.use(VueAxios, request)\n//   }\n// }\n\nexport default request\n\n// export {\n//   // installer as VueAxios,\n//   request as axios\n// }\n","import request from '@/utils/request'\n\nexport function user_api(data,method){\n    return request.request({\n        method: method,\n          url: \"user/\",\n          data: data,\n    })\n}\n\nexport function user_get(data){\n    return request.request({\n        method: \"get\",\n          url: \"user/\",\n          params: data,\n    })\n}\n\nexport function user_put(data){\n    return request.request({\n        method: \"put\",\n          url: \"user/\",\n          data: data,\n    })\n}\n\nexport function user_create(data){\n    return request.request({\n        method: \"post\",\n          url: \"user/\",\n          data: data,\n    })\n}\n\nexport function user_del(data){\n    return request.request({\n        method: \"delete\",\n          url: \"user/\",\n          data: [data],\n    })\n}"],"sourceRoot":""}